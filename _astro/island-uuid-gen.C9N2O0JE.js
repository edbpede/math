import{d as e,f as t,m as r,b as i,C as a,g as n,t as o,h as s,i as l,l as d,n as u,r as c,j as g,w as b}from"./solid-core.DXeZPQOr.js";import{$ as h}from"./exercises.CmwZ4dJn.js";import{Q as v}from"./qrcode.B15vZz8I.js";import{E as x}from"./island-practice.Crw8XKdE.js";var m=o('<div class="text-center py-8"><button type=button class="px-8 py-4 bg-blue-600 text-white font-bold text-lg rounded-lg shadow-lg hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 min-w-44px min-h-44px">'),f=o('<div class="text-center py-12"role=status aria-live=polite><div class="inline-block w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"aria-hidden=true></div><div class="mt-4 text-gray-600 font-medium">'),p=o("<div role=region><!$><!/><!$><!/><!$><!/><!$><!/>"),y=o('<svg class="w-6 h-6 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),w=o('<div class="qr-code-container p-6 bg-white border-2 border-blue-300 rounded-lg shadow-lg animate-fadeIn"role=dialog><div class="flex flex-col items-center gap-4"><div class=text-center><h3 class="text-lg font-bold text-gray-900 mb-2"></h3><p class="text-sm text-gray-600">Scan this QR code with your mobile device</p></div><img class="w-64 h-64 border-4 border-gray-200 rounded-lg shadow-md"width=256 height=256><button type=button class="px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 active:bg-gray-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400"aria-label="Close QR code">Close'),C=o('<div class="generated-container space-y-6"><div class="warning-banner p-4 bg-orange-100 border-2 border-orange-400 rounded-lg"role=alert><div class="flex items-start gap-3"><svg class="w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><div class=flex-1><div class="font-bold text-orange-900 mb-1"></div><div class="text-sm text-orange-800"></div></div></div></div><div class=uuid-display-container><label class="block text-sm font-medium text-gray-700 mb-2"></label><div class="uuid-display p-6 bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-300 rounded-lg shadow-md"><div class="text-center text-3xl md:text-4xl font-mono font-bold text-blue-900 tracking-wider select-all"tabindex=0></div></div></div><div class=save-options><div class="text-sm font-medium text-gray-700 mb-3"></div><div class="grid grid-cols-1 sm:grid-cols-3 gap-3"><button type=button class="save-button flex flex-col items-center justify-center gap-2 p-4 bg-white border-2 border-gray-300 rounded-lg shadow hover:border-blue-400 hover:bg-blue-50 active:bg-blue-100 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 min-h-44px"><!$><!/><span class="text-sm font-medium text-gray-900"></span></button><button type=button class="save-button flex flex-col items-center justify-center gap-2 p-4 bg-white border-2 border-gray-300 rounded-lg shadow hover:border-blue-400 hover:bg-blue-50 active:bg-blue-100 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 min-h-44px"><svg class="w-6 h-6 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span class="text-sm font-medium text-gray-900"></span></button><button type=button class="save-button flex flex-col items-center justify-center gap-2 p-4 bg-white border-2 border-gray-300 rounded-lg shadow hover:border-blue-400 hover:bg-blue-50 active:bg-blue-100 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 min-h-44px"><svg class="w-6 h-6 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg><span class="text-sm font-medium text-gray-900"></span></button></div><div class="mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center gap-2 text-sm text-gray-700"><svg class="w-5 h-5 text-gray-500 flex-shrink-0"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg><span></span></div></div></div><!$><!/>'),k=o('<svg class="w-6 h-6 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7">'),S=o('<div class="error-container text-center py-8"role=alert aria-live=assertive><div class="mb-4 p-4 bg-red-100 border-2 border-red-400 rounded-lg inline-block"><div class="flex items-center gap-3"><svg class="w-8 h-8 text-red-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=text-left><div class="font-bold text-red-900 mb-1">Error</div><div class="text-sm text-red-800"></div></div></div></div><div><button type=button class="px-6 py-3 bg-blue-600 text-white font-medium rounded-lg shadow hover:bg-blue-700 active:bg-blue-800 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300"aria-label="Try again">Try Again');const $=e=>{const o=r(h),[x,$]=i({status:"idle"}),[j,M]=i(!1),[R,U]=i(!1);a(()=>{e.autoGenerate&&L()});const L=async()=>{$({status:"generating"});try{const t=await fetch("/api/auth/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gradeRange:e.gradeRange,locale:e.locale})}),r=await t.json();if(!t.ok||!r.success)return void $({status:"error",message:r.error||"Failed to generate UUID"});const i=await v.toDataURL(r.uuid,{width:256,margin:2,color:{dark:"#1a1a1a",light:"#ffffff"}});$({status:"generated",uuid:r.uuid,qrCodeDataUrl:i}),e.onComplete&&e.onComplete(r.uuid)}catch(t){$({status:"error",message:"An unexpected error occurred. Please try again."})}},B=async()=>{const e=x();if("generated"===e.status)try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e.uuid),M(!0),void setTimeout(()=>M(!1),2e3);const t=document.createElement("textarea");t.value=e.uuid,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();const r=document.execCommand("copy");document.body.removeChild(t),r&&(M(!0),setTimeout(()=>M(!1),2e3))}catch(t){}},T=()=>{const t=x();if("generated"!==t.status)return;const r=`${o()("auth.uuid.yourNumber")}\n\n${t.uuid}\n\n${o()("auth.uuid.important")}\n\n${o()("auth.uuid.description")}\n\n---\nGenerated: ${(new Date).toLocaleString(e.locale)}\nGrade Range: ${e.gradeRange}\n`,i=new Blob([r],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(i),n=document.createElement("a"),s=(new Date).toISOString().split("T")[0];n.href=a,n.download=`practice-number-${s}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)};return(()=>{var r=n(p),i=r.firstChild,[a,h]=s(i.nextSibling),v=a.nextSibling,[$,M]=s(v.nextSibling),q=$.nextSibling,[z,D]=s(q.nextSibling),H=z.nextSibling,[G,N]=s(H.nextSibling);return l(r,t(g,{get when(){return"idle"===x().status},get children(){var e=n(m),t=e.firstChild;return t.$$click=L,l(t,()=>o()("auth.uuid.generate")),d(()=>u(t,"aria-label",o()("auth.uuid.generate"))),c(),e}}),a,h),l(r,t(g,{get when(){return"generating"===x().status},get children(){var e=n(f),t=e.firstChild.nextSibling;return l(t,()=>o()("common.status.loading")),e}}),$,M),l(r,t(g,{get when(){return"generated"===x().status},children:e=>{const r=x();return"generated"!==r.status?null:(()=>{var e=n(C),i=e.firstChild,a=i.firstChild.firstChild.nextSibling.firstChild,b=a.nextSibling,h=i.nextSibling,v=h.firstChild,x=v.nextSibling.firstChild,m=h.nextSibling,f=m.firstChild,p=f.nextSibling,S=p.firstChild,$=S.firstChild,[M,L]=s($.nextSibling),q=M.nextSibling,z=S.nextSibling,D=z.firstChild.nextSibling,H=z.nextSibling,G=H.firstChild.nextSibling,N=p.nextSibling.firstChild.firstChild.nextSibling,O=m.nextSibling,[V,E]=s(O.nextSibling);return l(a,()=>o()("auth.uuid.save.title")),l(b,()=>o()("auth.uuid.important")),l(v,()=>o()("auth.uuid.yourNumber")),l(x,()=>r.uuid),l(f,()=>o()("auth.uuid.save.instructions")),S.$$click=B,l(S,t(g,{get when(){return!j()},get fallback(){return n(k)},get children(){return n(y)}}),M,L),l(q,t(g,{get when(){return j()},get fallback(){return o()("auth.uuid.save.copy")},get children(){return o()("auth.uuid.copied")}})),z.$$click=T,l(D,()=>o()("auth.uuid.save.download")),H.$$click=()=>U(!R()),l(G,()=>o()("auth.uuid.save.qrCode")),l(N,()=>o()("auth.uuid.save.writeDown")),l(e,t(g,{get when(){return R()},get children(){var e=n(w),t=e.firstChild.firstChild,i=t.firstChild,a=t.nextSibling,s=a.nextSibling;return l(i,()=>o()("auth.uuid.save.qrCode")),s.$$click=()=>U(!1),d(t=>{var i=o()("auth.uuid.save.qrCode"),n=r.qrCodeDataUrl,s=`QR code for practice number ${r.uuid}`;return i!==t.e&&u(e,"aria-label",t.e=i),n!==t.t&&u(a,"src",t.t=n),s!==t.a&&u(a,"alt",t.a=s),t},{e:void 0,t:void 0,a:void 0}),c(),e}}),V,E),d(e=>{var t=`${o()("auth.uuid.yourNumber")} ${r.uuid}`,i=o()("auth.uuid.save.copy"),a=o()("auth.uuid.save.download"),n=o()("auth.uuid.save.qrCode"),s=R();return t!==e.e&&u(x,"aria-label",e.e=t),i!==e.t&&u(S,"aria-label",e.t=i),a!==e.a&&u(z,"aria-label",e.a=a),n!==e.o&&u(H,"aria-label",e.o=n),s!==e.i&&u(H,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),c(),e})()}}),z,D),l(r,t(g,{get when(){return"error"===x().status},children:e=>{const t=x();return"error"!==t.status?null:(r=n(S),i=r.firstChild,a=i.firstChild.firstChild.nextSibling.firstChild.nextSibling,o=i.nextSibling.firstChild,l(a,()=>t.message),o.$$click=L,c(),r);var r,i,a,o}}),G,N),d(t=>{var i=`uuid-generator ${e.class||""}`,a=o()("auth.uuid.title");return i!==t.e&&b(r,t.e=i),a!==t.t&&u(r,"aria-label",t.t=a),t},{e:void 0,t:void 0}),r})()};function j(e){return t(x,{componentName:"UUIDGenerator",errorMessageKey:"errors.auth.generationFailed",get children(){return t($,e)}})}e(["click"]);export{j as U};
