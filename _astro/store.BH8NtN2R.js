import{n as V,l as x,j as k}from"./store.D7pQqe3Y.js";function G(e,n={}){let t=e.listen(()=>{}),[r,o]=V({value:e.get()}),s=e.subscribe(i=>{o("value",x(i,n))});return k(()=>s()),t(),()=>r.value}const N="modulepreload",$=function(e){return"/"+e},P={},u=function(n,t,r){let o=Promise.resolve();if(t&&t.length>0){let i=function(l){return Promise.all(l.map(a=>Promise.resolve(a).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=i(t.map(l=>{if(l=$(l),l in P)return;P[l]=!0;const a=l.endsWith(".css"),_=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${_}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":N,a||(p.as="script"),p.crossOrigin="",p.href=l,d&&p.setAttribute("nonce",d),document.head.appendChild(p),a)return new Promise((I,U)=>{p.addEventListener("load",I),p.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return n().catch(s)})},v=(e,n,t)=>{const r=e[n];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},T=new Map;async function y(e){if(T.has(e))return T.get(e);try{const[n,t,r,o,s,i,c,d,l]=await Promise.all([v(Object.assign({"../../locales/da-DK/common.json":()=>u(()=>import("./common.cBz8hZqT.js"),[]),"../../locales/en-US/common.json":()=>u(()=>import("./common.DdIz3n71.js"),[])}),`../../locales/${e}/common.json`,5),v(Object.assign({"../../locales/da-DK/auth.json":()=>u(()=>import("./auth.HVp6IZyE.js"),[]),"../../locales/en-US/auth.json":()=>u(()=>import("./auth.Bs-kKy4E.js"),[])}),`../../locales/${e}/auth.json`,5),v(Object.assign({"../../locales/da-DK/navigation.json":()=>u(()=>import("./navigation.Btn6WB7J.js"),[]),"../../locales/en-US/navigation.json":()=>u(()=>import("./navigation.B2nT99uy.js"),[])}),`../../locales/${e}/navigation.json`,5),v(Object.assign({"../../locales/da-DK/competencies.json":()=>u(()=>import("./competencies.DdIfjZOw.js"),[]),"../../locales/en-US/competencies.json":()=>u(()=>import("./competencies.D0vbV592.js"),[])}),`../../locales/${e}/competencies.json`,5),v(Object.assign({"../../locales/da-DK/exercises.json":()=>u(()=>import("./exercises.-HbE34H0.js"),[]),"../../locales/en-US/exercises.json":()=>u(()=>import("./exercises.BZJtwYKu.js"),[])}),`../../locales/${e}/exercises.json`,5),v(Object.assign({"../../locales/da-DK/feedback.json":()=>u(()=>import("./feedback.DnPELs-0.js"),[]),"../../locales/en-US/feedback.json":()=>u(()=>import("./feedback.B3J2n9gt.js"),[])}),`../../locales/${e}/feedback.json`,5),v(Object.assign({"../../locales/da-DK/hints.json":()=>u(()=>import("./hints.BlcneRBO.js"),[]),"../../locales/en-US/hints.json":()=>u(()=>import("./hints.CqJ8wUWo.js"),[])}),`../../locales/${e}/hints.json`,5),v(Object.assign({"../../locales/da-DK/contexts.json":()=>u(()=>import("./contexts.BWTsIbiN.js"),[]),"../../locales/en-US/contexts.json":()=>u(()=>import("./contexts.OqJEuN6e.js"),[])}),`../../locales/${e}/contexts.json`,5),v(Object.assign({"../../locales/da-DK/errors.json":()=>u(()=>import("./errors.DeIckTYf.js"),[]),"../../locales/en-US/errors.json":()=>u(()=>import("./errors.CYNC8t1X.js"),[])}),`../../locales/${e}/errors.json`,5)]),a={common:n.default||n,auth:t.default||t,navigation:r.default||r,competencies:o.default||o,exercises:s.default||s,feedback:i.default||i,hints:c.default||c,contexts:d.default||d,errors:l.default||l};return T.set(e,a),a}catch(n){if(console.error(`Failed to load translations for locale ${e}:`,n),e!=="da-DK")return console.warn("Falling back to Danish (da-DK) translations"),y("da-DK");throw new Error(`Failed to load Danish fallback translations: ${n}`)}}function M(e,n){const t=n.split(".");let r=e;for(const o of t)if(r&&typeof r=="object"&&o in r)r=r[o];else return;return r}function K(e,n){return n?e.replace(/\{\{(\w+)\}\}/g,(t,r)=>r in n?String(n[r]):t):e}function q(){if(typeof window>"u")return"da-DK";const e=navigator.language||navigator.userLanguage;return e==="da-DK"||e==="en-US"?e:e.startsWith("da")?"da-DK":e.startsWith("en")?"en-US":"da-DK"}let f=[],E=0;const g=4;let L=0,O=e=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(r){return t.lc=n.push(r),()=>{for(let s=E+g;s<f.length;)f[s]===r?f.splice(s,g):s+=g;let o=n.indexOf(r);~o&&(n.splice(o,1),--t.lc||t.off())}},notify(r,o){L++;let s=!f.length;for(let i of n)f.push(i,t.value,r,o);if(s){for(E=0;E<f.length;E+=g)f[E](f[E+1],f[E+2],f[E+3]);f.length=0}},off(){},set(r){let o=t.value;o!==r&&(t.value=r,t.notify(o))},subscribe(r){let o=t.listen(r);return r(t.value),o},value:e};return t};const C=5,h=6,D=10;let F=(e,n,t,r)=>(e.events=e.events||{},e.events[t+D]||(e.events[t+D]=r(o=>{e.events[t].reduceRight((s,i)=>(i(s),s),{shared:{},...o})})),e.events[t]=e.events[t]||[],e.events[t].push(n),()=>{let o=e.events[t],s=o.indexOf(n);o.splice(s,1),o.length||(delete e.events[t],e.events[t+D](),delete e.events[t+D])}),Q=1e3,A=(e,n)=>F(e,r=>{let o=n(r);o&&e.events[h].push(o)},C,r=>{let o=e.listen;e.listen=(...i)=>(!e.lc&&!e.active&&(e.active=!0,r()),o(...i));let s=e.off;return e.events[h]=[],e.off=()=>{s(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let i of e.events[h])i();e.events[h]=[]}},Q)},()=>{e.listen=o,e.off=s}}),W=(e,n,t)=>{Array.isArray(e)||(e=[e]);let r,o,s=()=>{if(o===L)return;o=L;let l=e.map(a=>a.get());if(!r||l.some((a,_)=>a!==r[_])){r=l;let a=n(...l);a&&a.then&&a.t?a.then(_=>{r===l&&i.set(_)}):(i.set(a),o=L)}},i=O(void 0),c=i.get;i.get=()=>(s(),c());let d=s;return A(i,()=>{let l=e.map(a=>a.listen(d));return s(),()=>{for(let a of l)a()}}),i},B=(e,n)=>W(e,n),S=e=>e,m={},w={addEventListener(){},removeEventListener(){}};function J(){try{return typeof localStorage<"u"}catch{return!1}}J()&&(m=localStorage);let H={addEventListener(e,n,t){window.addEventListener("storage",n),window.addEventListener("pageshow",t)},removeEventListener(e,n,t){window.removeEventListener("storage",n),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(w=H);function Y(e,n=void 0,t={}){let r=t.encode||S,o=t.decode||S,s=O(n),i=s.set;s.set=l=>{let a=r(l);typeof a>"u"?delete m[e]:m[e]=a,i(l)};function c(l){l.key===e?l.newValue===null?i(n):i(o(l.newValue)):m[e]||i(n)}function d(){s.set(m[e]?o(m[e]):n)}return A(s,()=>{if(d(),t.listen!==!1)return w.addEventListener(e,c,d),()=>{w.removeEventListener(e,c,d)}}),s}const j=Y("app:locale",q(),{encode:JSON.stringify,decode:JSON.parse}),b=O(null),R=O(!1);async function X(e){if(j.get()!==e){R.set(!0);try{const n=await y(e);j.set(e),b.set(n)}catch(n){console.error(`Failed to change locale to ${e}:`,n)}finally{R.set(!1)}}}const Z=B([b,j],(e,n)=>(t,r)=>{if(!e)return console.warn(`Translations not loaded, returning key: ${t}`),t;const o=t.split("."),s=o[0],i=o.slice(1).join(".");if(!(s in e))return console.warn(`Translation category "${s}" not found for key: ${t}`),t;const c=M(e[s],i);return typeof c!="string"?(console.warn(`Translation not found or not a string for key: ${t} (locale: ${n})`),t):K(c,r)});export{Z as $,u as _,j as a,O as b,B as c,v as d,X as e,G as m};
