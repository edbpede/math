import{o as e,d as t,m as r,b as n,f as i,g as s,t as o,i as a,l,n as c,E as d,h as u,k as g,r as h,q as f,u as v,v as m,M as b,j as p,w as x,F as w,x as y,y as S,z as k,A as C,B as $,C as A,s as M}from"./solid-core.DXeZPQOr.js";import{$ as T,c as E}from"./exercises.CmwZ4dJn.js";let L=null;function I(){return L||(L=function(){if("undefined"==typeof document)return{announce:()=>{},clear:()=>{},destroy:()=>{}};let t=null,r=null;const n=[];let i=!1,s=null;const o=()=>{if(0===n.length)return void(i=!1);i=!0;const e=n.shift(),s="assertive"===e.priority?r:t;s?(s.textContent="",setTimeout(()=>{s.textContent=e.message,setTimeout(()=>{s.textContent="",o()},3e3)},100)):o()},a=()=>{n.length=0,null!==s&&(clearTimeout(s),s=null),t&&(t.textContent=""),r&&(r.textContent=""),i=!1},l=()=>{a(),t&&t.parentNode&&t.parentNode.removeChild(t),r&&r.parentNode&&r.parentNode.removeChild(r),t=null,r=null};return t=document.createElement("div"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.id="announcer-polite",document.body.appendChild(t),r=document.createElement("div"),r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive"),r.setAttribute("aria-atomic","true"),r.className="sr-only",r.id="announcer-assertive",document.body.appendChild(r),e(()=>{l()}),{announce:(e,t={})=>{if(!e.trim())return;const{priority:r="polite",delay:a=0,clearQueue:l=!1}=t;l&&(n.length=0),n.push({message:e,priority:r,timestamp:Date.now()}),i||(a>0?s=window.setTimeout(()=>{o()},a):o())},clear:a,destroy:l}}()),L}function j(e,t){I().announce(e,t)}var D=(e=>(e.NETWORK="network",e.AUTH="auth",e.EXERCISE="exercise",e.DATA="data",e.COMPONENT="component",e.GENERAL="general",e))(D||{}),B=(e=>(e.LOW="low",e.MEDIUM="medium",e.HIGH="high",e.CRITICAL="critical",e))(B||{});const K=[];function N(e){const t={timestamp:(new Date).toISOString(),url:"undefined"!=typeof window?window.location.href:void 0,userAgent:"undefined"!=typeof navigator?navigator.userAgent:void 0,...e.context},r={...e,context:t,handled:e.handled??!0};K.push(r),K.length>100&&K.shift()}function R(e,t=5e3){const r=Date.now()-t;return K.some(t=>{const n=t.context?.timestamp?new Date(t.context.timestamp).getTime():0;return t.error.message===e&&n>r})}var H=o('<div class="rounded-lg border-2 border-red-200 bg-red-50 p-6 text-center"role=alert aria-live=assertive><div class="mx-auto max-w-md"><div class="mb-4 flex justify-center"><svg class="h-12 w-12 text-red-600"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><h2 class="text-lg font-semibold text-red-900 mb-2"></h2><!$><!/><!$><!/><div class="mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center"><button class="touch-target inline-flex items-center justify-center rounded-md bg-red-600 px-6 py-3 text-base font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"><svg class="mr-2 h-5 w-5"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><!$><!/></button><button class="touch-target inline-flex items-center justify-center rounded-md border-2 border-red-300 bg-white px-6 py-3 text-base font-medium text-red-700 transition-colors hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"aria-label="Genindlæs siden">Genindlæs siden</button></div><p class="mt-4 text-sm text-red-600">'),q=o('<p class="text-sm text-red-700 mb-2">Component: <!$><!/>'),z=o('<details class="mt-3 text-left"><summary class="cursor-pointer text-sm font-medium text-red-800 hover:text-red-900">Technical details</summary><pre class="mt-2 overflow-auto rounded bg-red-100 p-2 text-xs text-red-900"><!$><!/><!$><!/>'),P=o("<div>");const V=e=>{const t=r(T),n=()=>e.errorMessageKey?t()(e.errorMessageKey):t()("errors.general.unexpected"),i=()=>{j(t()("errors.general.tryAgain"),{priority:"polite"}),e.reset()};return(()=>{var r,o,d=s(H),f=d.firstChild,v=f.firstChild.nextSibling,m=v.nextSibling,[b,p]=u(m.nextSibling),x=b.nextSibling,[w,y]=u(x.nextSibling),S=w.nextSibling,k=S.firstChild,C=k.firstChild.nextSibling,[$,A]=u(C.nextSibling),M=k.nextSibling,T=S.nextSibling;return a(v,n),a(f,(r=g(()=>!1),()=>r()&&(()=>{var t=s(q),r=t.firstChild.nextSibling,[n,i]=u(r.nextSibling);return a(t,()=>e.componentName,n,i),t})()),b,p),a(f,(o=g(()=>!1),()=>o()&&(()=>{var t,r=s(z),n=r.firstChild.nextSibling,i=n.firstChild,[o,l]=u(i.nextSibling),c=o.nextSibling,[d,h]=u(c.nextSibling);return a(n,()=>e.error.message,o,l),a(n,(t=g(()=>!!e.error.stack),()=>t()&&`\n\n${e.error.stack}`),d,h),r})()),w,y),k.$$click=i,a(k,()=>t()("errors.general.tryAgain"),$,A),M.$$click=()=>window.location.reload(),a(T,()=>t()("errors.general.contactSupport")),l(()=>c(k,"aria-label",t()("errors.general.tryAgain"))),h(),d})()},O=e=>{const t=r(T),[o,u]=n(0),g=()=>{u(e=>e+1)};return i(d,{fallback:r=>((r=>{N({error:r,context:{component:e.componentName||"Unknown",timestamp:(new Date).toISOString()}}),!1!==e.announceErrors&&j(e.errorMessageKey?t()(e.errorMessageKey):t()("errors.general.unexpected"),{priority:"assertive",clearQueue:!0});e.onError&&e.onError(r,g)})(r),e.fallback?e.fallback(r,g):i(V,{error:r,reset:g,get componentName(){return e.componentName},get errorMessageKey(){return e.errorMessageKey}})),get children(){var t=s(P);return a(t,()=>e.children),l(()=>c(t,"data-reset-key",o())),t}})};t(["click"]);const Q=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])',"audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(", ");function F(t,r={}){const[i,s]=n(!1);let o=null;const{initialFocus:a,returnFocus:l,onActivate:c,onDeactivate:d,allowEscape:u=!1,preventScroll:g=!1}=r,h=()=>{const e="function"==typeof t?t():void 0;if(!e)return[];const r=e.querySelectorAll(Q);return Array.from(r).filter(e=>null!==e.offsetParent||e===document.activeElement)},f=e=>{if(i())if("Tab"===e.key){const t=h();if(0===t.length)return void e.preventDefault();const r=t[0],n=t[t.length-1];e.shiftKey?document.activeElement===r&&(e.preventDefault(),n?.focus()):document.activeElement===n&&(e.preventDefault(),r?.focus())}else"Escape"===e.key&&u&&(e.preventDefault(),m())},v=e=>{if(!i())return;const r="function"==typeof t?t():void 0;if(!r)return;const n=e.target;if(!r.contains(n)){e.preventDefault();const t=h();t.length>0&&t[0].focus()}},m=()=>{i()&&"undefined"!=typeof document&&(s(!1),document.removeEventListener("keydown",f),document.removeEventListener("focusin",v),g&&(document.body.style.overflow=""),setTimeout(()=>{let e;l&&(e="function"==typeof l?l():l),!e&&o&&(e=o),e?.focus(),o=null},10),d?.())};return e(()=>{i()&&m()}),{activate:()=>{if(i())return;if("undefined"==typeof document)return;("function"==typeof t?t():void 0)&&(o=document.activeElement,g&&(document.body.style.overflow="hidden"),s(!0),document.addEventListener("keydown",f),document.addEventListener("focusin",v),setTimeout(()=>{let e;if(a&&(e="function"==typeof a?a():a),!e){e=h()[0]}e?.focus()},10),c?.())},deactivate:m,isActive:i}}function G(e,t){const r=function(e){const t=e.toLowerCase().split("+"),r={ctrl:t.includes("ctrl")||t.includes("control"),alt:t.includes("alt"),shift:t.includes("shift"),meta:t.includes("meta")||t.includes("cmd")||t.includes("command")};return{key:t[t.length-1],...r}}(t.key);return e.key.toLowerCase()===r.key.toLowerCase()&&(!(r.ctrl&&!e.ctrlKey)&&(!(!r.ctrl&&e.ctrlKey)&&(!(r.alt&&!e.altKey)&&(!(!r.alt&&e.altKey)&&(!(r.shift&&!e.shiftKey)&&(!(!r.shift&&e.shiftKey)&&(!(r.meta&&!e.metaKey)&&!(!r.meta&&e.metaKey))))))))}function U(e,t){const r=e.target;if(t.scope){const e="function"==typeof t.scope?t.scope():t.scope;if(e&&!e.contains(r))return!0}const n=r.tagName.toLowerCase(),i=r.isContentEditable;return!("input"!==n&&"textarea"!==n&&!i)&&"Escape"!==e.key}function W(e,t){try{switch(e.type){case"number-line":return function(e,t){const[r,n]=e.range,i=[];for(const o of e.hops)o>0?i.push(`${t("accessibility.math.operations.plus")} ${o}`):o<0&&i.push(`${t("accessibility.math.operations.minus")} ${Math.abs(o)}`);const s=i.join(", ");return t("accessibility.visualAids.numberLine",{start:r.toString(),end:n.toString(),description:s||"no operations"})}(e.data,t);case"diagram":return function(e,t){switch(e.diagramType){case"place-value":return function(e,t){const{hundreds:r=0,tens:n=0,ones:i=0}=e.breakdown;return t("accessibility.visualAids.placeValue",{hundreds:r.toString(),tens:n.toString(),ones:i.toString()})}(e,t);case"fraction":return function(e,t){return t("circle"===e.shapeType?"accessibility.visualAids.fractionCircle":"accessibility.visualAids.fractionRectangle",{numerator:e.numerator.toString(),denominator:e.denominator.toString()})}(e,t);default:return t("accessibility.visualAids.genericDiagram",{description:e.description||"mathematical concept"})}}(e.data,t);case"chart":return function(e,t){const r=e.description||"data visualization";return t("accessibility.visualAids.chart",{chartType:e.chartType,description:r})}(e.data,t);case"image":return e.data.alt;default:return"Visual aid: mathematical diagram"}}catch(r){return"Visual aid: mathematical diagram"}}var X=o("<div class=sr-only>"),Y=o("<div><div role=img></div><!$><!/>"),Z=o('<div class="number-line-container p-4"><svg viewBox="0 0 540 120"class="w-full h-auto"role=img><line x1=20 y1=60 x2=520 y2=60 stroke=currentColor stroke-width=2 class=text-gray-700></line><!$><!/><!$><!/><defs><marker id=arrowhead markerWidth=10 markerHeight=7 refX=9 refY=3.5 orient=auto><polygon points="0 0, 10 3.5, 0 7"fill=currentColor>'),J=o("<svg><line y1=55 y2=65 stroke=currentColor stroke-width=2 class=text-gray-700></svg>",!1,!0,!1),_=o('<svg><text y=85 text-anchor=middle class="text-sm font-medium fill-gray-700"></svg>',!1,!0,!1),ee=o("<svg><path fill=none stroke-width=2 marker-end=url(#arrowhead)></svg>",!1,!0,!1),te=o('<svg><text text-anchor=middle class="text-sm font-bold"><!$><!/><!$><!/></svg>',!1,!0,!1),re=o('<div class="p-4 bg-gray-100 rounded text-center text-gray-600"><p>Diagram type: <!$><!/></p><p class=text-sm>(Visualization coming soon)'),ne=o('<div class="diagram-container p-4">'),ie=o('<div class="place-value-diagram flex gap-4 justify-center items-end p-4">'),se=o('<div class="place-column flex flex-col items-center gap-2"><div class="text-sm font-bold text-gray-700 capitalize"></div><div class="blocks flex flex-col-reverse gap-1"></div><div class="text-lg font-bold text-gray-800">'),oe=o('<div class="block w-16 h-16 rounded border-2 flex items-center justify-center font-bold text-lg">'),ae=o('<svg viewBox="0 0 200 200"class="w-48 h-48 mx-auto"><circle cx=100 cy=100 r=90 fill=white stroke=currentColor stroke-width=2 class=text-gray-700></circle><!$><!/>'),le=o("<svg><line x1=100 y1=100 stroke=currentColor stroke-width=1 class=text-gray-700></svg>",!1,!0,!1),ce=o('<svg><path fill="rgb(147, 51, 234)"opacity=0.7></svg>',!1,!0,!1),de=o('<svg viewBox="0 0 200 80"class="w-full h-24 mx-auto"><rect x=0 y=10 width=200 height=60 fill=white stroke=currentColor stroke-width=2 class=text-gray-700></rect><!$><!/>'),ue=o("<svg><line y1=10 y2=70 stroke=currentColor stroke-width=1 class=text-gray-700></svg>",!1,!0,!1),ge=o('<svg><rect y=11 height=58 fill="rgb(147, 51, 234)"opacity=0.7></svg>',!1,!0,!1),he=o('<div class="chart-container p-4 bg-gray-100 rounded text-center"><p class=text-gray-600><!$><!/>: <!$><!/></p><p class="text-sm text-gray-500">(Chart visualization coming soon)'),fe=o('<div class="image-container p-4"><img class="max-w-full h-auto rounded shadow-md"loading=lazy>',!0,!1,!1);function ve(e){const t=r(T),n=v(()=>W(e.visualAid,t())),o=v(()=>function(e){switch(e.type){case"number-line":{const t=e.data,[r,n]=t.range;let i=`This is a number line visualization spanning from ${r} to ${n}. `;if(i+=`It starts at ${t.start}. `,t.hops.length>0){i+="The following operations are shown: ";let e=t.start;for(let r=0;r<t.hops.length;r++){const n=t.hops[r],s=e+n;n>0?i+=`Move forward ${n} from ${e} to ${s}. `:n<0&&(i+=`Move backward ${Math.abs(n)} from ${e} to ${s}. `),e=s}i+=`The final position is ${e}.`}return i}case"diagram":{const t=e.data;if("place-value"===t.diagramType){const e=t,{hundreds:r=0,tens:n=0,ones:i=0}=e.breakdown;return`This place value diagram shows the number ${100*r+10*n+i} broken down into its components. It displays ${r} hundred block${1!==r?"s":""}, ${n} tens block${1!==n?"s":""}, and ${i} ones block${1!==i?"s":""}.`}if("fraction"===t.diagramType){const e=t,{numerator:r,denominator:n,shapeType:i}=e;return`This fraction diagram uses a ${"circle"===i?"circle":"rectangular bar"} divided into ${n} equal parts. ${r} of these parts are shaded to represent the fraction ${r}/${n}.`}return null}default:return null}}(e.visualAid,t())),d=`visual-aid-desc-${Math.random().toString(36).substring(2,9)}`;return(()=>{var t=s(Y),r=t.firstChild,g=r.nextSibling,[h,f]=u(g.nextSibling);return a(r,i(m,{get children(){return[i(b,{get when(){return"number-line"===e.visualAid.type},get children(){return i(me,{get data(){return e.visualAid.data}})}}),i(b,{get when(){return"diagram"===e.visualAid.type},get children(){return i(be,{get data(){return e.visualAid.data}})}}),i(b,{get when(){return"chart"===e.visualAid.type},get children(){return i(Se,{get data(){return e.visualAid.data}})}}),i(b,{get when(){return"image"===e.visualAid.type},get children(){return i(ke,{get data(){return e.visualAid.data}})}})]}})),a(t,i(p,{get when(){return o()},get children(){var e=s(X);return c(e,"id",d),a(e,o),e}}),h,f),l(i=>{var s=`visual-aid ${e.class||""}`,a=n(),l=o()?d:void 0;return s!==i.e&&x(t,i.e=s),a!==i.t&&c(r,"aria-label",i.t=a),l!==i.a&&c(r,"aria-describedby",i.a=l),i},{e:void 0,t:void 0,a:void 0}),t})()}function me(e){const t=r(T),[n,o]=e.data.range,d=o-n+1,g=e=>(e-n)/(o-n)*500,h=Array.from({length:d},(e,t)=>n+t);let f=e.data.start;const v=e.data.hops.map(e=>{const t=f;return f+=e,{start:t,end:f,value:e}});return(()=>{var e=s(Z),r=e.firstChild,n=r.firstChild.nextSibling,[o,d]=u(n.nextSibling),f=o.nextSibling,[m,b]=u(f.nextSibling);return m.nextSibling,a(r,i(w,{each:h,children:e=>{const t=g(e)+20;return[(n=s(J),c(n,"x1",t),c(n,"x2",t),n),(r=s(_),c(r,"x",t),a(r,e),r)];var r,n}}),o,d),a(r,i(w,{each:v,children:(e,t)=>{const r=g(e.start)+20,n=g(e.end)+20,i=35-10*t(),o=e.value>0;return[(l=s(ee),c(l,"d",`M ${r} ${i} Q ${(r+n)/2} ${i-15} ${n} ${i}`),c(l,"stroke",o?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),l),(()=>{var t=s(te),l=t.firstChild,[d,g]=u(l.nextSibling),h=d.nextSibling,[f,v]=u(h.nextSibling);return c(t,"x",(r+n)/2),c(t,"y",i-20),c(t,"fill",o?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),a(t,o?"+":"",d,g),a(t,()=>e.value,f,v),t})()];var l}}),m,b),l(()=>c(r,"aria-label",t()("solutions.numberLine"))),e})()}function be(e){return t=s(ne),a(t,i(m,{get children(){return[i(b,{get when(){return"place-value"===e.data.diagramType},get children(){return i(pe,{get data(){return e.data}})}}),i(b,{get when(){return"fraction"===e.data.diagramType},get children(){return i(xe,{get data(){return e.data}})}}),i(b,{when:!0,get children(){var t=s(re),r=t.firstChild,n=r.firstChild.nextSibling,[i,o]=u(n.nextSibling);return a(r,()=>e.data.diagramType,i,o),t}})]}})),t;var t}function pe(e){const t=e.data.breakdown,r=Object.entries(t).reverse();return n=s(ie),a(n,i(w,{each:r,children:([e,t])=>{return r=s(se),n=r.firstChild,o=n.nextSibling,c=o.nextSibling,a(n,e),a(o,i(w,{get each(){return Array(t)},children:()=>{return t=s(oe),a(t,"hundreds"===e?"100":"tens"===e?"10":"1"),l(r=>y(t,{"bg-blue-200 border-blue-500 text-blue-900":"hundreds"===e,"bg-green-200 border-green-500 text-green-900":"tens"===e,"bg-yellow-200 border-yellow-500 text-yellow-900":"ones"===e},r)),t;var t}})),a(c,t),r;var r,n,o,c}})),n;var n}function xe(e){const t=e.data.numerator,r=e.data.denominator,n=e.data.shapeType;return i("circle"===n?we:ye,{numerator:t,denominator:r})}function we(e){const t=360/e.denominator,r=Array.from({length:e.denominator},(e,t)=>t);return(()=>{var n=s(ae),o=n.firstChild.nextSibling,[l,d]=u(o.nextSibling);return a(n,i(w,{each:r,children:r=>{const n=(r+1)*t-90,o=(r*t-90)*Math.PI/180,a=n*Math.PI/180,l=100+90*Math.cos(o),d=100+90*Math.sin(o),u=100+90*Math.cos(a),g=100+90*Math.sin(a);return[(h=s(le),c(h,"x2",l),c(h,"y2",d),h),i(p,{get when(){return r<e.numerator},get children(){var e=s(ce);return c(e,"d",`M 100 100 L ${l} ${d} A 90 90 0 0 1 ${u} ${g} Z`),e}})];var h}}),l,d),n})()}function ye(e){const t=Array.from({length:e.denominator},(e,t)=>t);return(()=>{var r=s(de),n=r.firstChild.nextSibling,[o,l]=u(n.nextSibling);return a(r,i(w,{each:t,children:t=>{const r=200*t/e.denominator,n=200/e.denominator;return[i(p,{when:t>0,get children(){var e=s(ue);return c(e,"x1",r),c(e,"x2",r),e}}),i(p,{get when(){return t<e.numerator},get children(){var e=s(ge);return c(e,"x",r+1),c(e,"width",n-2),e}})]}}),o,l),r})()}function Se(e){const t=r(T);return(()=>{var r=s(he),n=r.firstChild,i=n.firstChild,[o,l]=u(i.nextSibling),c=o.nextSibling.nextSibling,[d,g]=u(c.nextSibling);return a(n,()=>t()("solutions.chartType"),o,l),a(n,()=>e.data.chartType,d,g),r})()}function ke(e){return t=s(fe),r=t.firstChild,l(t=>{var n=e.data.src,i=e.data.alt,s=e.data.width,o=e.data.height;return n!==t.e&&c(r,"src",t.e=n),i!==t.t&&c(r,"alt",t.t=i),s!==t.a&&c(r,"width",t.a=s),o!==t.o&&c(r,"height",t.o=o),t},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,r}var Ce=o('<div class="solution-visual-aid mb-6 p-4 bg-purple-50 rounded-lg border border-purple-200"><div class="text-sm font-medium text-purple-900 mb-3"></div><!$><!/>'),$e=o('<div role=region><div class="worked-solution-header mb-4 pb-3 border-b-2 border-purple-300"><h3 class="text-lg font-bold text-purple-900 flex items-center gap-2"><svg class="w-6 h-6"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span></span></h3></div><div class="solution-steps space-y-4 mb-6"role=list></div><!$><!/><div class="final-answer p-4 rounded-lg bg-gradient-to-r from-green-100 to-green-200 border-2 border-green-400 shadow-md"role=status><div class="flex items-center gap-3"><svg class="w-8 h-8 text-green-700"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class=flex-1><div class="text-sm font-medium text-green-800 uppercase tracking-wide mb-1"></div><div class="text-xl font-bold text-green-900">'),Ae=o('<div class="step-visual-aid mt-3">'),Me=o('<div class="solution-step p-4 rounded-lg bg-gradient-to-r from-purple-50 to-purple-100 border border-purple-200 shadow-sm transition-all duration-200 hover:shadow-md"role=listitem><div class="flex items-start gap-4"><div class="step-number flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 text-white flex items-center justify-center font-bold text-sm shadow"aria-hidden=true></div><div class="step-content flex-1"><div class="step-explanation text-gray-700 font-medium mb-2"></div><div class="step-expression p-3 bg-white rounded border border-purple-200 font-mono text-lg text-purple-900 shadow-sm"></div><!$><!/>');function Te(e){const t=r(T);return S(()=>{!1!==e.show&&void 0!==e.show&&j(t()("accessibility.screenReader.solutionRevealed"),{priority:"polite",delay:200})}),i(p,{get when(){return!1!==e.show},get children(){var r=s($e),n=r.firstChild,o=n.firstChild.firstChild.nextSibling,d=n.nextSibling,g=d.nextSibling,[h,f]=u(g.nextSibling),v=h.nextSibling,m=v.firstChild.firstChild.nextSibling.firstChild,b=m.nextSibling;return a(o,()=>t()("solutions.stepByStepSolution")),a(d,i(w,{get each(){return e.solution.steps},children:(e,r)=>(()=>{var n=s(Me),o=n.firstChild.firstChild,d=o.nextSibling,g=d.firstChild,h=g.nextSibling,f=h.nextSibling,[v,m]=u(f.nextSibling);return a(o,()=>r()+1),a(g,()=>e.explanation),a(h,()=>e.expression),a(d,i(p,{get when(){return e.visualAid},get children(){var t=s(Ae);return a(t,i(ve,{get visualAid(){return e.visualAid}})),t}}),v,m),l(()=>c(n,"aria-label",`${t()("solutions.step")} ${r()+1}`)),n})()})),a(r,i(p,{get when(){return e.solution.visualAid},get children(){var r=s(Ce),n=r.firstChild,o=n.nextSibling,[l,c]=u(o.nextSibling);return a(n,()=>t()("solutions.overallVisualization")),a(r,i(ve,{get visualAid(){return e.solution.visualAid}}),l,c),r}}),h,f),a(m,()=>t()("solutions.finalAnswer")),a(b,()=>e.solution.finalAnswer),l(n=>{var i=`worked-solution-container ${e.class||""}`,s=t()("solutions.workedSolutionLabel"),o=t()("solutions.solutionSteps"),a=t()("solutions.finalAnswer");return i!==n.e&&x(r,n.e=i),s!==n.t&&c(r,"aria-label",n.t=s),o!==n.a&&c(d,"aria-label",n.a=o),a!==n.o&&c(v,"aria-label",n.o=a),n},{e:void 0,t:void 0,a:void 0,o:void 0}),r}})}var Ee=o('<span class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><span>'),Le=o('<div class="hint-progress mt-2 text-sm text-gray-600"aria-live=polite>'),Ie=o('<div class="revealed-hints space-y-4"role=list>'),je=o('<div class=hint-system role=region><div class="hint-button-container mb-4"><button type=button class="hint-button px-6 py-3 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2"style=min-width:44px;min-height:44px></button><!$><!/></div><!$><!/>'),De=o('<span class="flex items-center gap-2"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M5 13l4 4L19 7"></path></svg><span>'),Be=o('<div class="hint-visual-aid mt-3 p-3 bg-white rounded border border-gray-200"role=img><div class="text-sm text-gray-600 mb-2 font-medium"></div><div class="text-xs text-gray-500">Type: <!$><!/>'),Ke=o('<div class="worked-solution-wrapper mt-4">'),Ne=o('<div class="hint-item p-4 rounded-lg border-l-4 transition-all duration-300 animate-fade-in"role=listitem><div class="flex items-start gap-3"><div class="hint-level-badge flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm"aria-hidden=true></div><div class="hint-content flex-1"><div class="hint-text text-gray-800 leading-relaxed whitespace-pre-line"></div><!$><!/><!$><!/>');function Re(e){const t=r(T),[o,d]=n(0),f=E(e.hints,d);S(()=>{f.reset()});const v=()=>{const r=f.revealNext();r&&(e.onHintRequested(r.level),j(t()("accessibility.screenReader.hintRevealed",{level:r.level.toString()}),{priority:"polite",delay:200}))},m=()=>f.areAllRevealed(o()),b=()=>e.hints.length;return(()=>{var r=s(je),n=r.firstChild,d=n.firstChild,x=d.nextSibling,[S,$]=u(x.nextSibling),A=n.nextSibling,[M,T]=u(A.nextSibling);d.$$click=v;var E=e.hintButtonRef;return"function"==typeof E?k(E,d):e.hintButtonRef=d,a(d,i(p,{get when(){return!m()},get fallback(){return e=s(De),r=e.firstChild.nextSibling,a(r,()=>t()("hints.common.allHintsShown")),e;var e,r},get children(){var e,r=s(Ee),n=r.firstChild.nextSibling;return a(n,(e=g(()=>0===o()),()=>e()?t()("hints.common.getHint"):t()("hints.common.getNextHint"))),r}})),a(n,i(p,{get when(){return o()>0},get children(){var e=s(Le);return a(e,()=>t()("hints.common.hintProgress",{current:o().toString(),total:b().toString()})),e}}),S,$),a(r,i(p,{get when(){return o()>0},get children(){var e=s(Ie);return a(e,i(w,{get each(){return f.getRevealedHints(o())},children:e=>(()=>{var r=s(Ne),n=r.firstChild.firstChild,o=n.nextSibling,d=o.firstChild,g=d.nextSibling,[h,f]=u(g.nextSibling),v=h.nextSibling,[m,b]=u(v.nextSibling);return a(n,()=>e.level),a(d,()=>e.text),a(o,i(p,{get when(){return e.visualAid},get children(){var r=s(Be),n=r.firstChild,i=n.nextSibling,o=i.firstChild.nextSibling,[d,g]=u(o.nextSibling);return a(n,()=>t()("hints.common.visualAid")),a(i,()=>e.visualAid?.type,d,g),l(()=>c(r,"aria-label",t()("hints.common.visualAid"))),r}}),h,f),a(o,i(p,{get when(){return e.workedSolution},get children(){var t=s(Ke);return a(t,i(Te,{get solution(){return e.workedSolution}})),t}}),m,b),l(i=>{var s={"bg-blue-50 border-blue-500":1===e.level,"bg-green-50 border-green-500":2===e.level,"bg-yellow-50 border-yellow-500":3===e.level,"bg-purple-50 border-purple-500":4===e.level},o=`${t()("hints.common.hintLevel")} ${e.level}`,a={"bg-blue-600 text-white":1===e.level,"bg-green-600 text-white":2===e.level,"bg-yellow-600 text-white":3===e.level,"bg-purple-600 text-white":4===e.level};return i.e=y(r,s,i.e),o!==i.t&&c(r,"aria-label",i.t=o),i.a=y(n,a,i.a),i},{e:void 0,t:void 0,a:void 0}),r})()})),l(()=>c(e,"aria-label",t()("hints.common.revealedHints"))),e}}),M,T),l(n=>{var i=t()("hints.common.hintProgress",{current:o().toString(),total:b().toString()}),s={"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":!m()&&!e.disabled,"bg-gray-300 text-gray-500 cursor-not-allowed":m()||e.disabled},a=m()||e.disabled,l=m()?t()("hints.common.allHintsShown"):`${t()("hints.common.hintProgress",{current:(o()+1).toString(),total:b().toString()})}`;return i!==n.e&&c(r,"aria-label",n.e=i),n.t=y(d,s,n.t),a!==n.a&&C(d,"disabled",n.a=a),l!==n.o&&c(d,"aria-label",n.o=l),n},{e:void 0,t:void 0,a:void 0,o:void 0}),h(),r})()}t(["click"]);var He=o('<svg class="w-8 h-8 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z">'),qe=o('<p class="text-base font-semibold text-orange-900 mt-2">'),ze=o('<div class="visual-aid-section mb-6 p-4 bg-white rounded-lg border-2 border-gray-200 shadow-sm"><div class="text-sm font-medium text-gray-700 mb-3"></div><!$><!/>'),Pe=o('<div class="p-4 bg-white rounded-lg border-2 border-purple-200 shadow-sm">'),Ve=o('<div class="worked-solution-section mb-6"><button class="mb-4 px-5 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all flex items-center gap-2"aria-controls=worked-solution-content style=min-width:44px;min-height:44px><svg class="w-5 h-5 transition-transform duration-200"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7"></path></svg><span></span></button><div id=worked-solution-content>'),Oe=o('<button class="px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all"style=min-width:44px;min-height:44px>'),Qe=o('<div role=alert aria-live=polite aria-atomic=true><div class=feedback-content><div class="feedback-header flex items-start gap-4 mb-4"><div class=flex-shrink-0></div><div class=flex-1><h4 class="text-lg font-bold mb-2"></h4><p class="text-base mb-3"></p><!$><!/></div></div><!$><!/><!$><!/><div class="action-buttons flex gap-3 flex-wrap">'),Fe=o('<svg class="w-8 h-8 text-orange-600"fill=none stroke=currentColor viewBox="0 0 24 24"aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">'),Ge=o('<button class="px-6 py-3 bg-orange-600 text-white font-semibold rounded-lg hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all"style=min-width:44px;min-height:44px>');function Ue(e){const t=r(T),[o,d]=n(!1),f=()=>{d(e=>!e)};return(()=>{var r,n=s(Qe),d=n.firstChild,v=d.firstChild,m=v.firstChild,b=m.nextSibling,w=b.firstChild,S=w.nextSibling,k=S.nextSibling,[C,A]=u(k.nextSibling),M=v.nextSibling,[T,E]=u(M.nextSibling),L=T.nextSibling,[I,j]=u(L.nextSibling),D=I.nextSibling;return a(m,i(p,{get when(){return e.isCorrect},get fallback(){return s(Fe)},get children(){return s(He)}})),a(w,(r=g(()=>!!e.isCorrect),()=>r()?t()("feedback.correct.title"):t()("feedback.incorrect.title"))),a(S,()=>e.message),a(b,i(p,{get when(){return!e.isCorrect},get children(){var r=s(qe);return a(r,()=>t()("feedback.incorrect.showCorrect",{answer:e.correctAnswer})),r}}),C,A),a(d,i(p,{get when(){return e.visualAid},get children(){var r=s(ze),n=r.firstChild,o=n.nextSibling,[l,c]=u(o.nextSibling);return a(n,()=>t()("hints.common.visualAid")),a(r,i(ve,{get visualAid(){return e.visualAid}}),l,c),r}}),T,E),a(d,i(p,{get when(){return e.workedSolution},get children(){var r,n=s(Ve),d=n.firstChild,u=d.firstChild,v=u.nextSibling,m=d.nextSibling;return d.$$click=f,a(v,(r=g(()=>!!o()),()=>r()?t()("feedback.incorrect.hideSolution"):t()("feedback.incorrect.viewSolution"))),a(m,i(p,{get when(){return o()},get children(){var t=s(Pe);return a(t,i(Te,{get solution(){return e.workedSolution},show:!0})),t}})),l(e=>{var t=o(),r=!!o();return t!==e.e&&c(d,"aria-expanded",e.e=t),r!==e.t&&u.classList.toggle("rotate-180",e.t=r),e},{e:void 0,t:void 0}),h(),n}}),I,j),a(D,i(p,{get when(){return e.isCorrect},get fallback(){return i(p,{get when(){return e.onTryAgain},get children(){var r=s(Ge);return $(r,"click",e.onTryAgain),a(r,()=>t()("feedback.incorrect.tryAgain")),l(()=>c(r,"aria-label",t()("feedback.incorrect.tryAgain"))),h(),r}})},get children(){return i(p,{get when(){return e.onContinue},get children(){var r=s(Oe);return $(r,"click",e.onContinue),a(r,()=>t()("feedback.correct.continue")),l(()=>c(r,"aria-label",t()("feedback.correct.continue"))),h(),r}})}})),l(t=>{var r=`feedback-display-container mb-6 p-6 rounded-lg border-2 transition-all duration-300 animate-slide-in ${e.class||""}`,i={"bg-green-50 border-green-400":e.isCorrect,"bg-orange-50 border-orange-400":!e.isCorrect},s=!!e.isCorrect,o=!e.isCorrect,a=!!e.isCorrect,l=!e.isCorrect;return r!==t.e&&x(n,t.e=r),t.t=y(n,i,t.t),s!==t.a&&w.classList.toggle("text-green-900",t.a=s),o!==t.o&&w.classList.toggle("text-orange-900",t.o=o),a!==t.i&&S.classList.toggle("text-green-800",t.i=a),l!==t.n&&S.classList.toggle("text-orange-800",t.n=l),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n})()}function We(e){const t=e.trim();if(t.includes("=")){const e=function(e){const t=e.trim().match(/^(.+?)\s*=\s*(.+)$/);if(!t)return null;const r=t[1],n=t[2];return{type:"equation",left:We(r),right:We(n),originalText:e}}(t);if(e)return e}const r=function(e){const t=e.trim().match(/^(\d+)\s*\/\s*(\d+)$/);if(!t)return null;const r=parseInt(t[1],10),n=parseInt(t[2],10);return 0===n?null:{type:"fraction",numerator:r,denominator:n,originalText:e}}(t);if(r)return r;const n=function(e){const t=e.trim();return/^-?\d+(\.\d+)?$/.test(t.trim())?{type:"number",value:parseFloat(t),isDecimal:t.includes("."),originalText:e}:null}(t);if(n)return n;const i=function(e){const t=e.trim().match(/^(.+?)\s*([\+\-×÷\*\/])\s*(.+)$/);if(!t)return null;const r=t[1],n=t[2],i=t[3];return{type:"operation",left:We(r),operator:n,right:We(i),originalText:e}}(t);return i||{type:"text",text:t,originalText:e}}function Xe(e,t){switch(e.type){case"number":return function(e){return e.value.toString()}(e);case"fraction":return function(e,t){const{numerator:r,denominator:n}=e;return 1===r&&2===n?t("accessibility.math.fractions.oneHalf"):1===r&&3===n?t("accessibility.math.fractions.oneThird"):1===r&&4===n?t("accessibility.math.fractions.oneQuarter"):2===r&&3===n?t("accessibility.math.fractions.twoThirds"):3===r&&4===n?t("accessibility.math.fractions.threeQuarters"):t("accessibility.math.fractions.generic",{numerator:r.toString(),denominator:n.toString()})}(e,t);case"operation":return function(e,t){const r=Xe(e.left,t),n=function(e,t){switch(e){case"+":return t("accessibility.math.operations.plus");case"-":return t("accessibility.math.operations.minus");case"×":case"*":return t("accessibility.math.operations.times");case"÷":case"/":return t("accessibility.math.operations.dividedBy");default:return e}}(e.operator,t);return`${r} ${n} ${Xe(e.right,t)}`}(e,t);case"equation":return function(e,t){return`${Xe(e.left,t)} ${t("accessibility.math.operations.equals")} ${Xe(e.right,t)}`}(e,t);case"text":return e.text;default:return String(e)}}t(["click"]);var Ye=o("<span>");function Ze(e){const t=r(T),n=v(()=>{return t=e.expression,/[\+\-×÷\*\/\=]/.test(t)||/\d+\s*\/\s*\d+/.test(t)||/\d/.test(t)&&t.trim().split(/\s+/).length<=3;var t}),i=v(()=>n()?We(e.expression):null),o=v(()=>{const r=i();if(!r)return e.expression;try{return Xe(r,t())}catch(n){return e.expression}}),d=v(()=>n()),u=v(()=>`${e.class||""} ${"block"===e.display?"block":"inline"} ${d()?"math-expression font-mono":""}`.trim());return g=s(Ye),a(g,()=>e.expression),l(e=>{var t=u(),r=d()?"math":void 0,n=d()?o():void 0;return t!==e.e&&x(g,e.e=t),r!==e.t&&c(g,"role",e.t=r),n!==e.a&&c(g,"aria-label",e.a=n),e},{e:void 0,t:void 0,a:void 0}),g;var g}var Je=o('<div role=main><div class="progress-section mb-8"role=region><div class="flex items-center justify-between mb-3"><h2 class="text-lg font-semibold text-gray-700"></h2><span class="text-sm text-gray-600"><!$><!/>%</span></div><div class="progress-bar w-full h-3 bg-gray-200 rounded-full overflow-hidden"role=progressbar aria-valuemin=1><div class="progress-fill h-full bg-blue-600 transition-all duration-500 ease-out"></div></div></div><!$><!/>'),_e=o('<div class="text-center text-gray-600">'),et=o('<span class="text-xs px-3 py-1 rounded-full bg-purple-100 text-purple-700 font-medium">'),tt=o('<button type=submit class="px-6 py-3 font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 touch-target">'),rt=o('<button class="px-5 py-2 text-gray-600 font-medium rounded hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 transition-all text-sm touch-target">'),nt=o('<div class="skip-section flex justify-end">'),it=o('<div class="exercise-content bg-white rounded-lg shadow-md p-8"><div class="question-section mb-8"role=region><h3 class="text-xl font-bold text-gray-900 mb-4"></h3><div class="question-text text-2xl font-medium text-gray-800 leading-relaxed p-6 bg-blue-50 rounded-lg border-2 border-blue-200"></div><div class="mt-4 flex gap-3 flex-wrap"><span class="text-xs px-3 py-1 rounded-full bg-gray-100 text-gray-700"></span><!$><!/></div></div><form class="answer-section mb-6"><label for=answer-input class="block text-lg font-semibold text-gray-700 mb-3"></label><div class="flex gap-3"><input id=answer-input type=text class="flex-1 px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed transition-all touch-target"aria-required=true><!$><!/></div></form><!$><!/><!$><!/><div class="hint-section mb-6"></div><!$><!/>'),st=o('<div class="skip-confirm flex items-center gap-3 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg"><p class="text-sm text-yellow-900 font-medium"></p><button class="px-4 py-2 bg-yellow-600 text-white font-medium rounded hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all text-sm touch-target"></button><button class="px-4 py-2 bg-gray-300 text-gray-700 font-medium rounded hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-all text-sm touch-target">');function ot(t){const o=r(T),[d,v]=n(""),[m,b]=n({status:"pending"}),[w,$]=n(0),[E,L]=n(Date.now()),[I,D]=n(!1),[B,K]=n();let N;const R=function(t={}){const[r,i]=n(t.enabled??!0),s=new Map,o=(t.debug,e=>{if(r())for(const[t,r]of s.entries())if(G(e,r)&&!U(e,r)&&(!r.condition||r.condition())){!1!==r.preventDefault&&e.preventDefault(),r.stopPropagation&&e.stopPropagation(),r.handler(e);break}});return"undefined"!=typeof document&&(document.addEventListener("keydown",o),e(()=>{document.removeEventListener("keydown",o)})),{register:(e,t)=>{s.has(e),s.set(e,t)},unregister:e=>{s.delete(e)},getAll:()=>new Map(s),setEnabled:i,isEnabled:r}}();R.register("hint",{key:"h",description:"Get hint",handler:()=>{N&&!N.disabled&&N.click()},condition:()=>"validating"!==m().status}),R.register("skip",{key:"s",description:"Skip exercise",handler:()=>{const e=m();"pending"!==e.status&&"validating"!==e.status||I()||W()},condition:()=>{const e=m();return"pending"===e.status||"validating"===e.status}}),R.register("continue",{key:"Enter",description:"Continue to next exercise",handler:()=>{const e=m();"correct"===e.status?F():"incorrect"===e.status&&Q()},condition:()=>{const e=m();return"correct"===e.status||"incorrect"===e.status}});const H=()=>t.exercises[t.currentIndex],q=()=>t.exercises.length;S(()=>{if(H()){f(()=>{v(""),b({status:"pending"}),$(0),L(Date.now()),D(!1)});const e=t.currentIndex+1,r=q();j(o()("accessibility.screenReader.newQuestionLoaded",{current:e.toString(),total:r.toString()}),{priority:"polite",delay:300});const n=Math.round(e/r*100);25!==n&&50!==n&&75!==n||j(o()("accessibility.screenReader.progressMilestone",{percent:n.toString()}),{priority:"polite",delay:600}),setTimeout(()=>{B()?.focus()},100)}}),A(()=>{B()?.focus()});const z=e=>{$(e=>e+1)},P=()=>Math.floor((Date.now()-E())/1e3),V=e=>e.trim(),O=async e=>{e?.preventDefault();const r=V(d());if(!r)return;const n=H();if(n){b({status:"validating"});try{const e=r.toLowerCase()===String(n.correctAnswer.value).toLowerCase(),i=P(),s={exerciseId:n.id,templateId:n.templateId,correct:e,timeSpentSeconds:i,hintsUsed:w(),userAnswer:r};if(e){const e=o()("feedback.correct.messages"),r=e[Math.floor(Math.random()*e.length)];b({status:"correct",message:r}),t.onExerciseComplete(s)}else{const e=o()("feedback.incorrect.messages"),r=e[Math.floor(Math.random()*e.length)];b({status:"incorrect",message:r,correctAnswer:String(n.correctAnswer.value)}),t.onExerciseComplete(s)}}catch(i){const e=V(d())===String(H()?.correctAnswer.value);b({status:e?"correct":"incorrect",message:e?o()("feedback.correct.title"):o()("feedback.incorrect.title"),correctAnswer:String(H()?.correctAnswer.value)})}}},Q=()=>{v(""),b({status:"pending"}),B()?.focus()},F=()=>{t.currentIndex>=t.exercises.length-1&&t.onSessionComplete()},W=()=>{D(!0)},X=()=>{const e=H();if(!e)return;const r=P(),n={exerciseId:e.id,templateId:e.templateId,correct:!1,timeSpentSeconds:r,hintsUsed:w(),userAnswer:"",skipped:!0};t.onSkip(n),D(!1)},Y=()=>{D(!1)},Z=e=>{"Enter"===e.key&&(e.preventDefault(),O())},J=H(),_=m(),ee="validating"===_.status,te="correct"===_.status||"incorrect"===_.status,re="incorrect"===_.status;return(()=>{var e=s(Je),r=e.firstChild,n=r.firstChild,f=n.firstChild,m=f.nextSibling,b=m.firstChild,[w,S]=u(b.nextSibling);w.nextSibling;var $=n.nextSibling,A=$.firstChild,T=r.nextSibling,[E,L]=u(T.nextSibling);return a(f,()=>o()("exercises.session.progress",{current:(t.currentIndex+1).toString(),total:q().toString()})),a(m,()=>Math.round((t.currentIndex+1)/q()*100),w,S),a(e,i(p,{when:J,get fallback(){return e=s(_e),a(e,()=>o()("errors.exercise.notFound")),e;var e},children:e=>(()=>{var t=s(it),r=t.firstChild,n=r.firstChild,f=n.nextSibling,m=f.nextSibling,b=m.firstChild,x=b.nextSibling,[w,S]=u(x.nextSibling),$=r.nextSibling,A=$.firstChild,M=A.nextSibling,T=M.firstChild,E=T.nextSibling,[L,j]=u(E.nextSibling),D=$.nextSibling,[B,R]=u(D.nextSibling),H=B.nextSibling,[q,P]=u(H.nextSibling),V=q.nextSibling,G=V.nextSibling,[U,J]=u(G.nextSibling);return a(n,()=>o()("exercises.exercise.question")),a(f,i(Ze,{get expression(){return e().questionText},class:"text-2xl"})),a(b,()=>o()("exercises.exercise.difficulty",{level:e().metadata.difficulty})),a(m,i(p,{get when(){return e().metadata.isBinding},get children(){var e=s(et);return a(e,()=>o()("exercises.exercise.bindingContent")),e}}),w,S),$.addEventListener("submit",O),a(A,()=>o()("exercises.exercise.yourAnswer")),T.$$keydown=Z,T.$$input=e=>{return t=e.currentTarget.value,void v(t);var t},k(K,T),C(T,"disabled",te||ee),c(T,"aria-invalid",re),a(M,i(p,{when:!te,get children(){var e=s(tt);return a(e,i(p,{when:ee,get fallback(){return o()("exercises.exercise.checkAnswer")},get children(){return o()("exercises.validation.checking")}})),l(t=>{var r=!d().trim()||ee,n={"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":!ee&&!!d().trim(),"bg-gray-300 text-gray-500 cursor-not-allowed":!d().trim()||ee},i=o()("exercises.exercise.checkAnswer");return r!==t.e&&C(e,"disabled",t.e=r),t.t=y(e,n,t.t),i!==t.a&&c(e,"aria-label",t.a=i),t},{e:void 0,t:void 0,a:void 0}),e}}),L,j),a(t,i(p,{get when(){return te&&"correct"===_.status},get children(){return i(Ue,{isCorrect:!0,get message(){return g(()=>"correct"===_.status)()?_.message:""},get correctAnswer(){return String(e().correctAnswer.value)},get userAnswer(){return d()},get workedSolution(){return e().workedSolution},get visualAid(){return e().visualAid},onContinue:F})}}),B,R),a(t,i(p,{get when(){return te&&"incorrect"===_.status},get children(){return i(Ue,{isCorrect:!1,get message(){return g(()=>"incorrect"===_.status)()?_.message:""},get correctAnswer(){return g(()=>!("incorrect"!==_.status||!("correctAnswer"in _)))()?_.correctAnswer:String(e().correctAnswer.value)},get userAnswer(){return d()},get workedSolution(){return e().workedSolution},get visualAid(){return e().visualAid},onTryAgain:Q})}}),q,P),a(V,i(Re,{get hints(){return e().hints},onHintRequested:z,disabled:ee,get resetKey(){return e().id},hintButtonRef:e=>N=e})),a(t,i(p,{when:!te,get children(){var e=s(nt);return a(e,i(p,{get when(){return!I()},get fallback(){return e=s(st),t=e.firstChild,r=t.nextSibling,n=r.nextSibling,a(t,()=>o()("exercises.session.confirmQuit")),r.$$click=X,a(r,()=>o()("common.actions.confirm")),n.$$click=Y,a(n,()=>o()("common.actions.cancel")),h(),e;var e,t,r,n},get children(){var e=s(rt);return e.$$click=W,a(e,()=>o()("exercises.exercise.skipExercise")),l(()=>c(e,"aria-label",o()("exercises.exercise.skipExercise"))),h(),e}})),e}}),U,J),l(e=>{var t=o()("exercises.exercise.question"),n=o()("exercises.exercise.placeholder"),i=o()("exercises.exercise.yourAnswer");return t!==e.e&&c(r,"aria-label",e.e=t),n!==e.t&&c(T,"placeholder",e.t=n),i!==e.a&&c(T,"aria-label",e.a=i),e},{e:void 0,t:void 0,a:void 0}),l(()=>C(T,"value",d())),h(),t})()}),E,L),l(n=>{var i=`exercise-practice-container max-w-4xl mx-auto p-6 ${t.class||""}`,s=o()("exercises.session.title"),a=o()("exercises.session.progress",{current:(t.currentIndex+1).toString(),total:q().toString()}),l=t.currentIndex+1,d=q(),u=(t.currentIndex+1)/q()*100+"%";return i!==n.e&&x(e,n.e=i),s!==n.t&&c(e,"aria-label",n.t=s),a!==n.a&&c(r,"aria-label",n.a=a),l!==n.o&&c($,"aria-valuenow",n.o=l),d!==n.i&&c($,"aria-valuemax",n.i=d),u!==n.n&&M(A,"width",n.n=u),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}function at(e){return i(O,{componentName:"ExercisePractice",errorMessageKey:"errors.exercise.generationFailed",get children(){return i(ot,e)}})}t(["input","keydown","click"]);export{O as E,j as a,D as b,F as c,B as d,at as e,N as l,R as w};
