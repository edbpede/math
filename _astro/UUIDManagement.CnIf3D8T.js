import{d as Ne,c as v,g as l,a as $,i as r,b as y,m as _,e as I,r as ce,t as o,f as Oe,s as h,h as H,S as w}from"./store.D7pQqe3Y.js";import{m as Pe,$ as Ye}from"./store.CLE7GteW.js";import{f as Ze}from"./uuid.BUVVKM1U.js";import{d as Ke}from"./service.DU7FcLOF.js";import{Q as Ge}from"./browser.JCROvEip.js";import"./client.D0X2hLWc.js";import"./_commonjsHelpers.gnU0ypJ3.js";var Je=o('<div class="mb-4 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800"role=alert>'),We=o('<svg class="h-5 w-5 text-green-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),Xe=o('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">'),et=o('<div class="mt-4 rounded-lg border border-gray-200 bg-gray-50 p-6"><p class="mb-4 text-center text-sm text-gray-600"></p><div class="flex justify-center"><img class="rounded-lg border-4 border-white shadow-lg"width=256 height=256>'),tt=o('<div class="h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent">'),rt=o('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"role=dialog aria-labelledby=delete-modal-title aria-describedby=delete-modal-description><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><h3 id=delete-modal-title class="mb-4 text-xl font-bold text-gray-900"></h3><p id=delete-modal-description class="mb-4 text-gray-700"></p><div class="mb-6 rounded-lg border border-red-200 bg-red-50 p-4"><p class="mb-2 font-semibold text-red-900"></p><ul class="list-inside list-disc space-y-1 text-sm text-red-800"><li></li><li></li><li></li><li></li></ul></div><div class="flex gap-3"><button type=button class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50"></button><button type=button class="flex flex-1 items-center justify-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-50"><!$><!/><span>'),it=o('<div><!$><!/><section class="mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h3 class="mb-2 text-lg font-semibold text-gray-900"></h3><p class="mb-4 text-sm text-gray-600"></p><div class="mb-4 rounded-lg border border-amber-300 bg-amber-50 p-4"><div class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-amber-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><div><p class="font-medium text-amber-900"></p><p class="mt-1 text-sm text-amber-800"></p></div></div></div><div class=mb-4><label class="mb-2 block text-sm font-medium text-gray-700"></label><div class="flex items-center gap-3"><div class="flex-1 rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 font-mono text-lg tracking-wider"aria-live=polite></div><button type=button class="rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"></button></div></div><div class="flex flex-wrap gap-3"><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><!$><!/><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><!$><!/><span></span></button></div><!$><!/></section><section class="rounded-lg border-2 border-red-200 bg-red-50 p-6"><h3 class="mb-2 text-lg font-semibold text-red-900"></h3><p class="mb-4 text-sm text-red-800"></p><div class="rounded-lg border border-red-300 bg-white p-4"><h4 class="mb-2 font-semibold text-gray-900"></h4><p class="mb-4 text-sm text-gray-600"></p><button type=button class="rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300"></button></div></section><!$><!/>'),st=o('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),nt=o('<div class="h-5 w-5 animate-spin rounded-full border-2 border-gray-700 border-t-transparent">');function bt(z){const e=Pe(Ye),[a,d]=v({status:"idle"}),[R,ge]=v(!1),[L,V]=v(!1),[S,q]=v(!1),[F,ue]=v(null),[be,C]=v(!1),x=()=>Ze(z.uuid),me=()=>"****-****-****-****",fe=async()=>{try{await navigator.clipboard.writeText(x()),V(!0),setTimeout(()=>V(!1),3e3)}catch(i){console.error("Failed to copy UUID:",i),d({status:"error",message:e()("settings.uuid.copyError")}),setTimeout(()=>d({status:"idle"}),3e3)}},he=()=>{const i=`Your Practice Number: ${x()}

Keep this number safe. You need it to log in and access your progress.`,j=new Blob([i],{type:"text/plain"}),k=URL.createObjectURL(j),u=document.createElement("a");u.href=k,u.download=`practice-number-${x()}.txt`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(k)},xe=async()=>{if(S()){q(!1);return}if(!F()){d({status:"loading-qr"});try{const i=await Ge.toDataURL(x(),{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});ue(i),d({status:"idle"})}catch(i){console.error("Failed to generate QR code:",i),d({status:"error",message:e()("settings.uuid.copyError")});return}}q(!0)},pe=async()=>{d({status:"deleting"});try{const i=await Ke(z.uuid);if(!i.success){d({status:"error",message:i.error||e()("settings.deleteAccount.error")}),C(!1);return}window.location.href="/"}catch(i){console.error("Error deleting account:",i),d({status:"error",message:e()("settings.deleteAccount.error")}),C(!1)}};return(()=>{var i=l(it),j=i.firstChild,[k,u]=$(j.nextSibling),B=k.nextSibling,T=B.firstChild,N=T.nextSibling,O=N.nextSibling,ve=O.firstChild,$e=ve.firstChild,ye=$e.nextSibling,P=ye.firstChild,_e=P.nextSibling,Y=O.nextSibling,Z=Y.firstChild,we=Z.nextSibling,K=we.firstChild,E=K.nextSibling,G=Y.nextSibling,U=G.firstChild,Se=U.firstChild,[J,Ce]=$(Se.nextSibling),ke=J.nextSibling,M=U.nextSibling,Ue=M.firstChild,Ae=Ue.nextSibling,p=M.nextSibling,Re=p.firstChild,[W,Me]=$(Re.nextSibling),De=W.nextSibling,Qe=G.nextSibling,[ze,Fe]=$(Qe.nextSibling),X=B.nextSibling,ee=X.firstChild,te=ee.nextSibling,je=te.nextSibling,re=je.firstChild,ie=re.nextSibling,se=ie.nextSibling,Be=X.nextSibling,[Ee,Ie]=$(Be.nextSibling);return r(i,y(w,{get when(){return a().status==="error"},get children(){var t=l(Je);return r(t,()=>a().message),t}}),k,u),r(T,()=>e()("settings.uuid.title")),r(N,()=>e()("settings.uuid.description")),r(P,()=>e()("settings.uuid.warning.title")),r(_e,()=>e()("settings.uuid.warning.message")),r(Z,()=>e()("settings.uuid.label")),r(K,(()=>{var t=_(()=>!!R());return()=>t()?x():me()})()),E.$$click=()=>ge(!R()),r(E,(()=>{var t=_(()=>!!R());return()=>t()?e()("settings.uuid.hide"):e()("settings.uuid.show")})()),U.$$click=fe,r(U,y(w,{get when(){return L()},get fallback(){return l(st)},get children(){return l(We)}}),J,Ce),r(ke,(()=>{var t=_(()=>!!L());return()=>t()?e()("settings.uuid.copied"):e()("settings.uuid.copy")})()),M.$$click=he,r(Ae,()=>e()("settings.uuid.export")),p.$$click=xe,r(p,y(w,{get when(){return a().status!=="loading-qr"},get fallback(){return l(nt)},get children(){return l(Xe)}}),W,Me),r(De,(()=>{var t=_(()=>!!S());return()=>t()?e()("settings.uuid.hideQR"):e()("settings.uuid.showQR")})()),r(B,y(w,{get when(){return _(()=>!!S())()&&F()},get children(){var t=l(et),b=t.firstChild,m=b.nextSibling,c=m.firstChild;return r(b,()=>e()("settings.uuid.qrDescription")),I(s=>{var g=F(),f=`QR code for practice number ${x()}`;return g!==s.e&&h(c,"src",s.e=g),f!==s.t&&h(c,"alt",s.t=f),s},{e:void 0,t:void 0}),t}}),ze,Fe),r(ee,()=>e()("settings.sections.dangerZone.title")),r(te,()=>e()("settings.sections.dangerZone.description")),r(re,()=>e()("settings.deleteAccount.title")),r(ie,()=>e()("settings.deleteAccount.description")),se.$$click=()=>C(!0),r(se,()=>e()("settings.deleteAccount.button")),r(i,y(w,{get when(){return be()},get children(){var t=l(rt),b=t.firstChild,m=b.firstChild,c=m.nextSibling,s=c.nextSibling,g=s.firstChild,f=g.nextSibling,A=f.firstChild,ne=A.nextSibling,le=ne.nextSibling,He=le.nextSibling,Le=s.nextSibling,D=Le.firstChild,Q=D.nextSibling,Ve=Q.firstChild,[oe,qe]=$(Ve.nextSibling),Te=oe.nextSibling;return t.$$click=n=>{n.target===n.currentTarget&&C(!1)},r(m,()=>e()("settings.deleteAccount.confirm.title")),r(c,()=>e()("settings.deleteAccount.confirm.message")),r(g,()=>e()("settings.deleteAccount.confirm.warning")),r(A,()=>e()("settings.deleteAccount.confirm.items.0")),r(ne,()=>e()("settings.deleteAccount.confirm.items.1")),r(le,()=>e()("settings.deleteAccount.confirm.items.2")),r(He,()=>e()("settings.deleteAccount.confirm.items.3")),D.$$click=()=>C(!1),r(D,()=>e()("settings.deleteAccount.confirm.cancelButton")),Q.$$click=pe,r(Q,y(w,{get when(){return a().status==="deleting"},get children(){return l(tt)}}),oe,qe),r(Te,(()=>{var n=_(()=>a().status==="deleting");return()=>n()?e()("settings.deleteAccount.deleting"):e()("settings.deleteAccount.confirm.confirmButton")})()),I(n=>{var ae=a().status==="deleting",de=a().status==="deleting";return ae!==n.e&&H(D,"disabled",n.e=ae),de!==n.t&&H(Q,"disabled",n.t=de),n},{e:void 0,t:void 0}),ce(),t}}),Ee,Ie),I(t=>{var b=`uuid-management ${z.class||""}`,m=R()?e()("settings.uuid.hide"):e()("settings.uuid.show"),c=e()("settings.uuid.copy"),s=e()("settings.uuid.export"),g=S()?e()("settings.uuid.hideQR"):e()("settings.uuid.showQR"),f=S(),A=a().status==="loading-qr";return b!==t.e&&Oe(i,t.e=b),m!==t.t&&h(E,"aria-label",t.t=m),c!==t.a&&h(U,"aria-label",t.a=c),s!==t.o&&h(M,"aria-label",t.o=s),g!==t.i&&h(p,"aria-label",t.i=g),f!==t.n&&h(p,"aria-expanded",t.n=f),A!==t.s&&H(p,"disabled",t.s=A),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),ce(),i})()}Ne(["click"]);export{bt as default};
