const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/network-status.BrKK7yR3.js","_astro/offline.Cje6W5Yz.js","_astro/idb.B3QPy4uZ.js","_astro/island-dashboard.BXXnSGgj.js","_astro/exercises.qBB0Fcdg.js","_astro/solid-core.DXeZPQOr.js","_astro/mastery.Dl1Tnavr.js","_astro/supabase.Bg7B0XWC.js","_astro/vendor.DULspf60.js","_astro/qrcode.C5UO-pJ-.js"])))=>i.map(i=>d[i]);
import{$ as e,_ as t}from"./exercises.qBB0Fcdg.js";import{d as n,m as i,b as a,C as o,g as s,h as r,i as l,f as c,l as d,t as m,w as u,o as g,j as f,k as v,A as w,n as h,r as y}from"./solid-core.DXeZPQOr.js";var p=m('<span class="absolute inset-0 w-2 h-2 rounded-full bg-blue-600 animate-ping opacity-75"aria-hidden=true>'),b=m('<span class="text-sm text-gray-600 hidden sm:inline"><!$><!/> <!$><!/>'),x=m('<button type=button class="btn-ghost text-xs touch-target"><svg fill=none viewBox="0 0 24 24"stroke=currentColor aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),S=m('<div role=status aria-live=polite aria-atomic=true><div class="flex items-center gap-2"><div class=relative><span aria-hidden=true></span><!$><!/></div><span></span></div><!$><!/><!$><!/>');function $(n){const m=i(e),[$,E]=a(!0),[L,k]=a(!1),[M,C]=a(null),[j,D]=a(""),I=()=>{"undefined"!=typeof navigator&&E(navigator.onLine)},_=()=>{const e=M();e&&D((e=>{const t=(new Date).getTime()-e.getTime(),n=Math.floor(t/1e3),i=Math.floor(n/60),a=Math.floor(i/60),o=Math.floor(a/24),s=m();return n<60?s("common.time.justNow"):i<60?`${i} ${s("common.time.minutes")} ${s("common.time.ago")}`:a<24?`${a} ${s("common.time.hours")} ${s("common.time.ago")}`:`${o} ${s("common.time.days")} ${s("common.time.ago")}`})(e))},T=async()=>{if(!L()&&$()){k(!0);try{const{triggerManualSync:e}=await t(async()=>{const{triggerManualSync:e}=await import("./network-status.BrKK7yR3.js");return{triggerManualSync:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));await e(),C(new Date)}catch(e){}finally{k(!1)}}};o(()=>{if("undefined"==typeof window)return;if(I(),window.addEventListener("online",I),window.addEventListener("offline",I),"undefined"!=typeof localStorage){const e=localStorage.getItem("lastSyncTimestamp");e&&C(new Date(e))}const e=setInterval(_,3e4);_();const t=()=>k(!0),n=e=>{k(!1);const t=new Date(e.detail.timestamp||Date.now());C(t),"undefined"!=typeof localStorage&&localStorage.setItem("lastSyncTimestamp",t.toISOString())};window.addEventListener("sync:start",t),window.addEventListener("sync:complete",n),g(()=>{"undefined"!=typeof window&&(window.removeEventListener("online",I),window.removeEventListener("offline",I),window.removeEventListener("sync:start",t),window.removeEventListener("sync:complete",n)),clearInterval(e)})});const A=()=>L()?m()("common.status.syncing"):$()?m()("common.status.online"):m()("common.status.offline");return(()=>{var e=s(S),t=e.firstChild,i=t.firstChild,a=i.firstChild,o=a.nextSibling,[g,E]=r(o.nextSibling),k=i.nextSibling,C=t.nextSibling,[D,I]=r(C.nextSibling),_=D.nextSibling,[B,H]=r(_.nextSibling);return l(i,c(f,{get when(){return L()},get children(){return s(p)}}),g,E),l(k,A),l(e,c(f,{get when(){return v(()=>!!M())()&&!L()},get children(){var e=s(b),t=e.firstChild,[n,i]=r(t.nextSibling),a=n.nextSibling.nextSibling,[o,c]=r(a.nextSibling);return l(e,()=>m()("common.status.synced"),n,i),l(e,j,o,c),e}}),D,I),l(e,c(f,{get when(){return v(()=>!!n.showSyncButton)()&&$()},get children(){var e=s(x),t=e.firstChild;return e.$$click=T,d(n=>{var i=L(),a=m()("common.status.syncing"),o=m()("common.status.syncing"),s="w-4 h-4 "+(L()?"animate-spin":"");return i!==n.e&&w(e,"disabled",n.e=i),a!==n.t&&h(e,"aria-label",n.t=a),o!==n.a&&h(e,"title",n.a=o),s!==n.o&&h(t,"class",n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),y(),e}}),B,H),d(t=>{var i=`sync-status flex items-center gap-3 ${n.class||""}`,o="inline-block w-2 h-2 rounded-full "+(L()?"bg-blue-600":$()?"bg-green-600":"bg-gray-400"),s="text-sm font-medium "+(L()?"text-blue-600":$()?"text-green-600":"text-gray-500");return i!==t.e&&u(e,t.e=i),o!==t.t&&u(a,t.t=o),s!==t.a&&u(k,t.a=s),t},{e:void 0,t:void 0,a:void 0}),e})()}n(["click"]);export{$ as default};
