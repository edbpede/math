import{d as t,m as e,b as i,y as r,g as s,h as n,i as o,f as l,k as a,l as d,r as c,t as g,w as u,n as b,A as m,j as h,z as p}from"./solid-core.DXeZPQOr.js";import{$ as x}from"./exercises.DgCluh1K.js";import{f,d as v}from"./island-settings.CeeMt4Rk.js";import{c as y}from"./island-practice.aaVD3onJ.js";import{Q as w}from"./qrcode.C5UO-pJ-.js";import"./island-dashboard.bEGyKmZ3.js";import"./mastery.C6TVri_y.js";import"./supabase.Bg7B0XWC.js";import"./vendor.DULspf60.js";var S=g('<div class="mb-4 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800"role=alert>'),k=g('<svg class="h-5 w-5 text-green-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),C=g('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">'),$=g('<div class="mt-4 rounded-lg border border-gray-200 bg-gray-50 p-6"><p class="mb-4 text-center text-sm text-gray-600"></p><div class="flex justify-center"><img class="rounded-lg border-4 border-white shadow-lg"width=256 height=256>'),j=g('<div class="h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent">'),A=g('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"role=dialog aria-labelledby=delete-modal-title aria-describedby=delete-modal-description><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><h3 id=delete-modal-title class="mb-4 text-xl font-bold text-gray-900"></h3><p id=delete-modal-description class="mb-4 text-gray-700"></p><div class="mb-6 rounded-lg border border-red-200 bg-red-50 p-4"><p class="mb-2 font-semibold text-red-900"></p><ul class="list-inside list-disc space-y-1 text-sm text-red-800"><li></li><li></li><li></li><li></li></ul></div><div class="flex gap-3"><button type=button class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50 touch-target"></button><button type=button class="flex flex-1 items-center justify-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-50 touch-target"><!$><!/><span>'),z=g('<div><!$><!/><section class="mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h3 class="mb-2 text-lg font-semibold text-gray-900"></h3><p class="mb-4 text-sm text-gray-600"></p><div class="mb-4 rounded-lg border border-amber-300 bg-amber-50 p-4"><div class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-amber-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><div><p class="font-medium text-amber-900"></p><p class="mt-1 text-sm text-amber-800"></p></div></div></div><div class=mb-4><label class="mb-2 block text-sm font-medium text-gray-700"></label><div class="flex items-center gap-3"><div class="flex-1 rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 font-mono text-lg tracking-wider"aria-live=polite></div><button type=button class="rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"></button></div></div><div class="flex flex-wrap gap-3"><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><!$><!/><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><!$><!/><span></span></button></div><!$><!/></section><section class="rounded-lg border-2 border-red-200 bg-red-50 p-6"><h3 class="mb-2 text-lg font-semibold text-red-900"></h3><p class="mb-4 text-sm text-red-800"></p><div class="rounded-lg border border-red-300 bg-white p-4"><h4 class="mb-2 font-semibold text-gray-900"></h4><p class="mb-4 text-sm text-gray-600"></p><button type=button class="rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 touch-target"></button></div></section><!$><!/>'),M=g('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),R=g('<div class="h-5 w-5 animate-spin rounded-full border-2 border-gray-700 border-t-transparent">');function B(t){const g=e(x),[B,F]=i({status:"idle"}),[L,Q]=i(!1),[V,q]=i(!1),[E,H]=i(!1),[U,D]=i(null),[T,O]=i(!1);let Y;const Z=y(()=>Y,{preventScroll:!0,allowEscape:!0,onDeactivate:()=>O(!1)});r(()=>{T()?Z.activate():Z.deactivate()});const G=()=>f(t.uuid),J=async()=>{try{await navigator.clipboard.writeText(G()),q(!0),setTimeout(()=>q(!1),3e3)}catch(t){F({status:"error",message:g()("settings.uuid.copyError")}),setTimeout(()=>F({status:"idle"}),3e3)}},K=()=>{const t=`Your Practice Number: ${G()}\n\nKeep this number safe. You need it to log in and access your progress.`,e=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(e),r=document.createElement("a");r.href=i,r.download=`practice-number-${G()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)},N=async()=>{if(E())H(!1);else{if(!U()){F({status:"loading-qr"});try{const t=await w.toDataURL(G(),{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});D(t),F({status:"idle"})}catch(t){return void F({status:"error",message:g()("settings.uuid.copyError")})}}H(!0)}},P=async()=>{F({status:"deleting"});try{const e=await v(t.uuid);if(!e.success)return F({status:"error",message:e.error||g()("settings.deleteAccount.error")}),void O(!1);window.location.href="/"}catch(e){F({status:"error",message:g()("settings.deleteAccount.error")}),O(!1)}};return(()=>{var e,i,r,x,f=s(z),v=f.firstChild,[y,w]=n(v.nextSibling),F=y.nextSibling,q=F.firstChild,H=q.nextSibling,D=H.nextSibling,Z=D.firstChild.firstChild.nextSibling.firstChild,I=Z.nextSibling,W=D.nextSibling,X=W.firstChild,_=X.nextSibling.firstChild,tt=_.nextSibling,et=W.nextSibling,it=et.firstChild,rt=it.firstChild,[st,nt]=n(rt.nextSibling),ot=st.nextSibling,lt=it.nextSibling,at=lt.firstChild.nextSibling,dt=lt.nextSibling,ct=dt.firstChild,[gt,ut]=n(ct.nextSibling),bt=gt.nextSibling,mt=et.nextSibling,[ht,pt]=n(mt.nextSibling),xt=F.nextSibling,ft=xt.firstChild,vt=ft.nextSibling,yt=vt.nextSibling.firstChild,wt=yt.nextSibling,St=wt.nextSibling,kt=xt.nextSibling,[Ct,$t]=n(kt.nextSibling);return o(f,l(h,{get when(){return"error"===B().status},get children(){var t=s(S);return o(t,()=>B().message),t}}),y,w),o(q,()=>g()("settings.uuid.title")),o(H,()=>g()("settings.uuid.description")),o(Z,()=>g()("settings.uuid.warning.title")),o(I,()=>g()("settings.uuid.warning.message")),o(X,()=>g()("settings.uuid.label")),o(_,(e=a(()=>!!L()),()=>e()?G():"****-****-****-****")),tt.$$click=()=>Q(!L()),o(tt,(i=a(()=>!!L()),()=>i()?g()("settings.uuid.hide"):g()("settings.uuid.show"))),it.$$click=J,o(it,l(h,{get when(){return V()},get fallback(){return s(M)},get children(){return s(k)}}),st,nt),o(ot,(r=a(()=>!!V()),()=>r()?g()("settings.uuid.copied"):g()("settings.uuid.copy"))),lt.$$click=K,o(at,()=>g()("settings.uuid.export")),dt.$$click=N,o(dt,l(h,{get when(){return"loading-qr"!==B().status},get fallback(){return s(R)},get children(){return s(C)}}),gt,ut),o(bt,(x=a(()=>!!E()),()=>x()?g()("settings.uuid.hideQR"):g()("settings.uuid.showQR"))),o(F,l(h,{get when(){return a(()=>!!E())()&&U()},get children(){var t=s($),e=t.firstChild,i=e.nextSibling.firstChild;return o(e,()=>g()("settings.uuid.qrDescription")),d(t=>{var e=U(),r=`QR code for practice number ${G()}`;return e!==t.e&&b(i,"src",t.e=e),r!==t.t&&b(i,"alt",t.t=r),t},{e:void 0,t:void 0}),t}}),ht,pt),o(ft,()=>g()("settings.sections.dangerZone.title")),o(vt,()=>g()("settings.sections.dangerZone.description")),o(yt,()=>g()("settings.deleteAccount.title")),o(wt,()=>g()("settings.deleteAccount.description")),St.$$click=()=>O(!0),o(St,()=>g()("settings.deleteAccount.button")),o(f,l(h,{get when(){return T()},get children(){var t=s(A),e=t.firstChild,i=e.firstChild,r=i.nextSibling,u=r.nextSibling,b=u.firstChild,x=b.nextSibling.firstChild,f=x.nextSibling,v=f.nextSibling,y=v.nextSibling,w=u.nextSibling.firstChild,S=w.nextSibling,k=S.firstChild,[C,$]=n(k.nextSibling),z=C.nextSibling;t.$$click=t=>{t.target===t.currentTarget&&O(!1)};var M;return"function"==typeof Y?p(Y,e):Y=e,o(i,()=>g()("settings.deleteAccount.confirm.title")),o(r,()=>g()("settings.deleteAccount.confirm.message")),o(b,()=>g()("settings.deleteAccount.confirm.warning")),o(x,()=>g()("settings.deleteAccount.confirm.items.0")),o(f,()=>g()("settings.deleteAccount.confirm.items.1")),o(v,()=>g()("settings.deleteAccount.confirm.items.2")),o(y,()=>g()("settings.deleteAccount.confirm.items.3")),w.$$click=()=>O(!1),o(w,()=>g()("settings.deleteAccount.confirm.cancelButton")),S.$$click=P,o(S,l(h,{get when(){return"deleting"===B().status},get children(){return s(j)}}),C,$),o(z,(M=a(()=>"deleting"===B().status),()=>M()?g()("settings.deleteAccount.deleting"):g()("settings.deleteAccount.confirm.confirmButton"))),d(t=>{var e="deleting"===B().status,i="deleting"===B().status;return e!==t.e&&m(w,"disabled",t.e=e),i!==t.t&&m(S,"disabled",t.t=i),t},{e:void 0,t:void 0}),c(),t}}),Ct,$t),d(e=>{var i=`uuid-management ${t.class||""}`,r=L()?g()("settings.uuid.hide"):g()("settings.uuid.show"),s=g()("settings.uuid.copy"),n=g()("settings.uuid.export"),o=E()?g()("settings.uuid.hideQR"):g()("settings.uuid.showQR"),l=E(),a="loading-qr"===B().status;return i!==e.e&&u(f,e.e=i),r!==e.t&&b(tt,"aria-label",e.t=r),s!==e.a&&b(it,"aria-label",e.a=s),n!==e.o&&b(lt,"aria-label",e.o=n),o!==e.i&&b(dt,"aria-label",e.i=o),l!==e.n&&b(dt,"aria-expanded",e.n=l),a!==e.s&&m(dt,"disabled",e.s=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),c(),f})()}t(["click"]);export{B as default};
