import{d as Ye,c as $,j as Ze,g as o,a as y,i as r,b as _,m as w,e as T,r as me,t as a,f as Ke,s as h,h as H,S,u as Ge}from"./store.C-Iyz76Y.js";import{m as Je,$ as We}from"./store.BEcAnxVL.js";import{f as Xe}from"./uuid.BUVVKM1U.js";import{d as et}from"./service.DU7FcLOF.js";import{c as tt}from"./focus-trap.CegowVgX.js";import{Q as rt}from"./browser.JCROvEip.js";import"./client.D0X2hLWc.js";import"./_commonjsHelpers.gnU0ypJ3.js";var it=a('<div class="mb-4 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800"role=alert>'),st=a('<svg class="h-5 w-5 text-green-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),nt=a('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">'),lt=a('<div class="mt-4 rounded-lg border border-gray-200 bg-gray-50 p-6"><p class="mb-4 text-center text-sm text-gray-600"></p><div class="flex justify-center"><img class="rounded-lg border-4 border-white shadow-lg"width=256 height=256>'),ot=a('<div class="h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent">'),at=a('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"role=dialog aria-labelledby=delete-modal-title aria-describedby=delete-modal-description><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><h3 id=delete-modal-title class="mb-4 text-xl font-bold text-gray-900"></h3><p id=delete-modal-description class="mb-4 text-gray-700"></p><div class="mb-6 rounded-lg border border-red-200 bg-red-50 p-4"><p class="mb-2 font-semibold text-red-900"></p><ul class="list-inside list-disc space-y-1 text-sm text-red-800"><li></li><li></li><li></li><li></li></ul></div><div class="flex gap-3"><button type=button class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50"></button><button type=button class="flex flex-1 items-center justify-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-50"><!$><!/><span>'),dt=a('<div><!$><!/><section class="mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h3 class="mb-2 text-lg font-semibold text-gray-900"></h3><p class="mb-4 text-sm text-gray-600"></p><div class="mb-4 rounded-lg border border-amber-300 bg-amber-50 p-4"><div class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-amber-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><div><p class="font-medium text-amber-900"></p><p class="mt-1 text-sm text-amber-800"></p></div></div></div><div class=mb-4><label class="mb-2 block text-sm font-medium text-gray-700"></label><div class="flex items-center gap-3"><div class="flex-1 rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 font-mono text-lg tracking-wider"aria-live=polite></div><button type=button class="rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"></button></div></div><div class="flex flex-wrap gap-3"><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><!$><!/><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300"><!$><!/><span></span></button></div><!$><!/></section><section class="rounded-lg border-2 border-red-200 bg-red-50 p-6"><h3 class="mb-2 text-lg font-semibold text-red-900"></h3><p class="mb-4 text-sm text-red-800"></p><div class="rounded-lg border border-red-300 bg-white p-4"><h4 class="mb-2 font-semibold text-gray-900"></h4><p class="mb-4 text-sm text-gray-600"></p><button type=button class="rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300"></button></div></section><!$><!/>'),ct=a('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),ut=a('<div class="h-5 w-5 animate-spin rounded-full border-2 border-gray-700 border-t-transparent">');function $t(z){const e=Je(We),[d,c]=$({status:"idle"}),[R,fe]=$(!1),[L,V]=$(!1),[C,q]=$(!1),[E,he]=$(null),[N,x]=$(!1);let F;const O=tt(()=>F,{preventScroll:!0,allowEscape:!0,onDeactivate:()=>x(!1)});Ze(()=>{N()?O.activate():O.deactivate()});const p=()=>Xe(z.uuid),xe=()=>"****-****-****-****",pe=async()=>{try{await navigator.clipboard.writeText(p()),V(!0),setTimeout(()=>V(!1),3e3)}catch(i){console.error("Failed to copy UUID:",i),c({status:"error",message:e()("settings.uuid.copyError")}),setTimeout(()=>c({status:"idle"}),3e3)}},ve=()=>{const i=`Your Practice Number: ${p()}

Keep this number safe. You need it to log in and access your progress.`,j=new Blob([i],{type:"text/plain"}),k=URL.createObjectURL(j),b=document.createElement("a");b.href=k,b.download=`practice-number-${p()}.txt`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(k)},$e=async()=>{if(C()){q(!1);return}if(!E()){c({status:"loading-qr"});try{const i=await rt.toDataURL(p(),{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});he(i),c({status:"idle"})}catch(i){console.error("Failed to generate QR code:",i),c({status:"error",message:e()("settings.uuid.copyError")});return}}q(!0)},ye=async()=>{c({status:"deleting"});try{const i=await et(z.uuid);if(!i.success){c({status:"error",message:i.error||e()("settings.deleteAccount.error")}),x(!1);return}window.location.href="/"}catch(i){console.error("Error deleting account:",i),c({status:"error",message:e()("settings.deleteAccount.error")}),x(!1)}};return(()=>{var i=o(dt),j=i.firstChild,[k,b]=y(j.nextSibling),B=k.nextSibling,P=B.firstChild,Y=P.nextSibling,Z=Y.nextSibling,_e=Z.firstChild,we=_e.firstChild,Se=we.nextSibling,K=Se.firstChild,Ce=K.nextSibling,G=Z.nextSibling,J=G.firstChild,ke=J.nextSibling,W=ke.firstChild,I=W.nextSibling,X=G.nextSibling,U=X.firstChild,Ue=U.firstChild,[ee,Ae]=y(Ue.nextSibling),Re=ee.nextSibling,D=U.nextSibling,De=D.firstChild,Me=De.nextSibling,v=D.nextSibling,Qe=v.firstChild,[te,ze]=y(Qe.nextSibling),Ee=te.nextSibling,Fe=X.nextSibling,[je,Be]=y(Fe.nextSibling),re=B.nextSibling,ie=re.firstChild,se=ie.nextSibling,Ie=se.nextSibling,ne=Ie.firstChild,le=ne.nextSibling,oe=le.nextSibling,Te=re.nextSibling,[He,Le]=y(Te.nextSibling);return r(i,_(S,{get when(){return d().status==="error"},get children(){var t=o(it);return r(t,()=>d().message),t}}),k,b),r(P,()=>e()("settings.uuid.title")),r(Y,()=>e()("settings.uuid.description")),r(K,()=>e()("settings.uuid.warning.title")),r(Ce,()=>e()("settings.uuid.warning.message")),r(J,()=>e()("settings.uuid.label")),r(W,(()=>{var t=w(()=>!!R());return()=>t()?p():xe()})()),I.$$click=()=>fe(!R()),r(I,(()=>{var t=w(()=>!!R());return()=>t()?e()("settings.uuid.hide"):e()("settings.uuid.show")})()),U.$$click=pe,r(U,_(S,{get when(){return L()},get fallback(){return o(ct)},get children(){return o(st)}}),ee,Ae),r(Re,(()=>{var t=w(()=>!!L());return()=>t()?e()("settings.uuid.copied"):e()("settings.uuid.copy")})()),D.$$click=ve,r(Me,()=>e()("settings.uuid.export")),v.$$click=$e,r(v,_(S,{get when(){return d().status!=="loading-qr"},get fallback(){return o(ut)},get children(){return o(nt)}}),te,ze),r(Ee,(()=>{var t=w(()=>!!C());return()=>t()?e()("settings.uuid.hideQR"):e()("settings.uuid.showQR")})()),r(B,_(S,{get when(){return w(()=>!!C())()&&E()},get children(){var t=o(lt),l=t.firstChild,m=l.nextSibling,u=m.firstChild;return r(l,()=>e()("settings.uuid.qrDescription")),T(s=>{var g=E(),f=`QR code for practice number ${p()}`;return g!==s.e&&h(u,"src",s.e=g),f!==s.t&&h(u,"alt",s.t=f),s},{e:void 0,t:void 0}),t}}),je,Be),r(ie,()=>e()("settings.sections.dangerZone.title")),r(se,()=>e()("settings.sections.dangerZone.description")),r(ne,()=>e()("settings.deleteAccount.title")),r(le,()=>e()("settings.deleteAccount.description")),oe.$$click=()=>x(!0),r(oe,()=>e()("settings.deleteAccount.button")),r(i,_(S,{get when(){return N()},get children(){var t=o(at),l=t.firstChild,m=l.firstChild,u=m.nextSibling,s=u.nextSibling,g=s.firstChild,f=g.nextSibling,A=f.firstChild,ae=A.nextSibling,de=ae.nextSibling,Ve=de.nextSibling,qe=s.nextSibling,M=qe.firstChild,Q=M.nextSibling,Ne=Q.firstChild,[ce,Oe]=y(Ne.nextSibling),Pe=ce.nextSibling;t.$$click=n=>{n.target===n.currentTarget&&x(!1)};var ue=F;return typeof ue=="function"?Ge(ue,l):F=l,r(m,()=>e()("settings.deleteAccount.confirm.title")),r(u,()=>e()("settings.deleteAccount.confirm.message")),r(g,()=>e()("settings.deleteAccount.confirm.warning")),r(A,()=>e()("settings.deleteAccount.confirm.items.0")),r(ae,()=>e()("settings.deleteAccount.confirm.items.1")),r(de,()=>e()("settings.deleteAccount.confirm.items.2")),r(Ve,()=>e()("settings.deleteAccount.confirm.items.3")),M.$$click=()=>x(!1),r(M,()=>e()("settings.deleteAccount.confirm.cancelButton")),Q.$$click=ye,r(Q,_(S,{get when(){return d().status==="deleting"},get children(){return o(ot)}}),ce,Oe),r(Pe,(()=>{var n=w(()=>d().status==="deleting");return()=>n()?e()("settings.deleteAccount.deleting"):e()("settings.deleteAccount.confirm.confirmButton")})()),T(n=>{var ge=d().status==="deleting",be=d().status==="deleting";return ge!==n.e&&H(M,"disabled",n.e=ge),be!==n.t&&H(Q,"disabled",n.t=be),n},{e:void 0,t:void 0}),me(),t}}),He,Le),T(t=>{var l=`uuid-management ${z.class||""}`,m=R()?e()("settings.uuid.hide"):e()("settings.uuid.show"),u=e()("settings.uuid.copy"),s=e()("settings.uuid.export"),g=C()?e()("settings.uuid.hideQR"):e()("settings.uuid.showQR"),f=C(),A=d().status==="loading-qr";return l!==t.e&&Ke(i,t.e=l),m!==t.t&&h(I,"aria-label",t.t=m),u!==t.a&&h(U,"aria-label",t.a=u),s!==t.o&&h(D,"aria-label",t.o=s),g!==t.i&&h(v,"aria-label",t.i=g),f!==t.n&&h(v,"aria-expanded",t.n=f),A!==t.s&&H(v,"disabled",t.s=A),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),me(),i})()}Ye(["click"]);export{$t as default};
