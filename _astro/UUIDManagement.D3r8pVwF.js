import{d as e,f as t,m as i,b as r,y as s,g as n,t as o,h as l,i as a,j as d,k as c,l as g,n as u,z as b,A as m,r as h,w as p}from"./solid-core.DXeZPQOr.js";import{$ as x}from"./exercises.CmwZ4dJn.js";import{f,d as v}from"./island-settings.CRmBYshX.js";import{E as y,c as w}from"./island-practice.Crw8XKdE.js";import{Q as S}from"./qrcode.B15vZz8I.js";import"./island-dashboard.Bt_Br7pH.js";import"./mastery.BYaRoLpV.js";import"./supabase.BYn26wLR.js";import"./vendor.CmgFkl6N.js";var k=o('<div class="mb-4 rounded-lg border border-red-300 bg-red-50 p-4 text-red-800"role=alert>'),C=o('<svg class="h-5 w-5 text-green-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),$=o('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">'),j=o('<div class="mt-4 rounded-lg border border-gray-200 bg-gray-50 p-6"><p class="mb-4 text-center text-sm text-gray-600"></p><div class="flex justify-center"><img class="rounded-lg border-4 border-white shadow-lg"width=256 height=256>'),A=o('<div class="h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent">'),M=o('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"role=dialog aria-labelledby=delete-modal-title aria-describedby=delete-modal-description><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl"><h3 id=delete-modal-title class="mb-4 text-xl font-bold text-gray-900"></h3><p id=delete-modal-description class="mb-4 text-gray-700"></p><div class="mb-6 rounded-lg border border-red-200 bg-red-50 p-4"><p class="mb-2 font-semibold text-red-900"></p><ul class="list-inside list-disc space-y-1 text-sm text-red-800"><li></li><li></li><li></li><li></li></ul></div><div class="flex gap-3"><button type=button class="flex-1 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-300 disabled:opacity-50 touch-target"></button><button type=button class="flex flex-1 items-center justify-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 disabled:opacity-50 touch-target"><!$><!/><span>'),z=o('<div><!$><!/><section class="mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm"><h3 class="mb-2 text-lg font-semibold text-gray-900"></h3><p class="mb-4 text-sm text-gray-600"></p><div class="mb-4 rounded-lg border border-amber-300 bg-amber-50 p-4"><div class="flex items-start gap-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-amber-600"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><div><p class="font-medium text-amber-900"></p><p class="mt-1 text-sm text-amber-800"></p></div></div></div><div class=mb-4><label class="mb-2 block text-sm font-medium text-gray-700"></label><div class="flex items-center gap-3"><div class="flex-1 rounded-lg border border-gray-300 bg-gray-50 px-4 py-3 font-mono text-lg tracking-wider"aria-live=polite></div><button type=button class="rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"></button></div></div><div class="flex flex-wrap gap-3"><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><!$><!/><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span></span></button><button type=button class="flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-blue-300 touch-target"><!$><!/><span></span></button></div><!$><!/></section><section class="rounded-lg border-2 border-red-200 bg-red-50 p-6"><h3 class="mb-2 text-lg font-semibold text-red-900"></h3><p class="mb-4 text-sm text-red-800"></p><div class="rounded-lg border border-red-300 bg-white p-4"><h4 class="mb-2 font-semibold text-gray-900"></h4><p class="mb-4 text-sm text-gray-600"></p><button type=button class="rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700 focus:outline-none focus:ring-4 focus:ring-red-300 touch-target"></button></div></section><!$><!/>'),R=o('<svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">'),B=o('<div class="h-5 w-5 animate-spin rounded-full border-2 border-gray-700 border-t-transparent">');const F=e=>{const o=i(x),[y,F]=r({status:"idle"}),[U,E]=r(!1),[H,L]=r(!1),[Q,V]=r(!1),[q,D]=r(null),[T,K]=r(!1);let N;const O=w(()=>N,{preventScroll:!0,allowEscape:!0,onDeactivate:()=>K(!1)});s(()=>{T()?O.activate():O.deactivate()});const Y=()=>f(e.uuid),Z=async()=>{try{await navigator.clipboard.writeText(Y()),L(!0),setTimeout(()=>L(!1),3e3)}catch(e){F({status:"error",message:o()("settings.uuid.copyError")}),setTimeout(()=>F({status:"idle"}),3e3)}},G=()=>{const e=`Your Practice Number: ${Y()}\n\nKeep this number safe. You need it to log in and access your progress.`,t=new Blob([e],{type:"text/plain"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=`practice-number-${Y()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)},I=async()=>{if(Q())V(!1);else{if(!q()){F({status:"loading-qr"});try{const e=await S.toDataURL(Y(),{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});D(e),F({status:"idle"})}catch(e){return void F({status:"error",message:o()("settings.uuid.copyError")})}}V(!0)}},J=async()=>{F({status:"deleting"});try{const t=await v(e.uuid);if(!t.success)return F({status:"error",message:t.error||o()("settings.deleteAccount.error")}),void K(!1);window.location.href="/"}catch(t){F({status:"error",message:o()("settings.deleteAccount.error")}),K(!1)}};return(()=>{var i,r,s,x,f=n(z),v=f.firstChild,[w,S]=l(v.nextSibling),F=w.nextSibling,L=F.firstChild,V=L.nextSibling,D=V.nextSibling,O=D.firstChild.firstChild.nextSibling.firstChild,P=O.nextSibling,W=D.nextSibling,X=W.firstChild,_=X.nextSibling.firstChild,ee=_.nextSibling,te=W.nextSibling,ie=te.firstChild,re=ie.firstChild,[se,ne]=l(re.nextSibling),oe=se.nextSibling,le=ie.nextSibling,ae=le.firstChild.nextSibling,de=le.nextSibling,ce=de.firstChild,[ge,ue]=l(ce.nextSibling),be=ge.nextSibling,me=te.nextSibling,[he,pe]=l(me.nextSibling),xe=F.nextSibling,fe=xe.firstChild,ve=fe.nextSibling,ye=ve.nextSibling.firstChild,we=ye.nextSibling,Se=we.nextSibling,ke=xe.nextSibling,[Ce,$e]=l(ke.nextSibling);return a(f,t(d,{get when(){return"error"===y().status},get children(){var e=n(k);return a(e,()=>y().message),e}}),w,S),a(L,()=>o()("settings.uuid.title")),a(V,()=>o()("settings.uuid.description")),a(O,()=>o()("settings.uuid.warning.title")),a(P,()=>o()("settings.uuid.warning.message")),a(X,()=>o()("settings.uuid.label")),a(_,(i=c(()=>!!U()),()=>i()?Y():"****-****-****-****")),ee.$$click=()=>E(!U()),a(ee,(r=c(()=>!!U()),()=>r()?o()("settings.uuid.hide"):o()("settings.uuid.show"))),ie.$$click=Z,a(ie,t(d,{get when(){return H()},get fallback(){return n(R)},get children(){return n(C)}}),se,ne),a(oe,(s=c(()=>!!H()),()=>s()?o()("settings.uuid.copied"):o()("settings.uuid.copy"))),le.$$click=G,a(ae,()=>o()("settings.uuid.export")),de.$$click=I,a(de,t(d,{get when(){return"loading-qr"!==y().status},get fallback(){return n(B)},get children(){return n($)}}),ge,ue),a(be,(x=c(()=>!!Q()),()=>x()?o()("settings.uuid.hideQR"):o()("settings.uuid.showQR"))),a(F,t(d,{get when(){return c(()=>!!Q())()&&q()},get children(){var e=n(j),t=e.firstChild,i=t.nextSibling.firstChild;return a(t,()=>o()("settings.uuid.qrDescription")),g(e=>{var t=q(),r=`QR code for practice number ${Y()}`;return t!==e.e&&u(i,"src",e.e=t),r!==e.t&&u(i,"alt",e.t=r),e},{e:void 0,t:void 0}),e}}),he,pe),a(fe,()=>o()("settings.sections.dangerZone.title")),a(ve,()=>o()("settings.sections.dangerZone.description")),a(ye,()=>o()("settings.deleteAccount.title")),a(we,()=>o()("settings.deleteAccount.description")),Se.$$click=()=>K(!0),a(Se,()=>o()("settings.deleteAccount.button")),a(f,t(d,{get when(){return T()},get children(){var e=n(M),i=e.firstChild,r=i.firstChild,s=r.nextSibling,u=s.nextSibling,p=u.firstChild,x=p.nextSibling.firstChild,f=x.nextSibling,v=f.nextSibling,w=v.nextSibling,S=u.nextSibling.firstChild,k=S.nextSibling,C=k.firstChild,[$,j]=l(C.nextSibling),z=$.nextSibling;e.$$click=e=>{e.target===e.currentTarget&&K(!1)};var R;return"function"==typeof N?b(N,i):N=i,a(r,()=>o()("settings.deleteAccount.confirm.title")),a(s,()=>o()("settings.deleteAccount.confirm.message")),a(p,()=>o()("settings.deleteAccount.confirm.warning")),a(x,()=>o()("settings.deleteAccount.confirm.items.0")),a(f,()=>o()("settings.deleteAccount.confirm.items.1")),a(v,()=>o()("settings.deleteAccount.confirm.items.2")),a(w,()=>o()("settings.deleteAccount.confirm.items.3")),S.$$click=()=>K(!1),a(S,()=>o()("settings.deleteAccount.confirm.cancelButton")),k.$$click=J,a(k,t(d,{get when(){return"deleting"===y().status},get children(){return n(A)}}),$,j),a(z,(R=c(()=>"deleting"===y().status),()=>R()?o()("settings.deleteAccount.deleting"):o()("settings.deleteAccount.confirm.confirmButton"))),g(e=>{var t="deleting"===y().status,i="deleting"===y().status;return t!==e.e&&m(S,"disabled",e.e=t),i!==e.t&&m(k,"disabled",e.t=i),e},{e:void 0,t:void 0}),h(),e}}),Ce,$e),g(t=>{var i=`uuid-management ${e.class||""}`,r=U()?o()("settings.uuid.hide"):o()("settings.uuid.show"),s=o()("settings.uuid.copy"),n=o()("settings.uuid.export"),l=Q()?o()("settings.uuid.hideQR"):o()("settings.uuid.showQR"),a=Q(),d="loading-qr"===y().status;return i!==t.e&&p(f,t.e=i),r!==t.t&&u(ee,"aria-label",t.t=r),s!==t.a&&u(ie,"aria-label",t.a=s),n!==t.o&&u(le,"aria-label",t.o=n),l!==t.i&&u(de,"aria-label",t.i=l),a!==t.n&&u(de,"aria-expanded",t.n=a),d!==t.s&&m(de,"disabled",t.s=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),h(),f})()};function U(e){return t(y,{componentName:"UUIDManagement",errorMessageKey:"errors.settings.managementFailed",get children(){return t(F,e)}})}e(["click"]);export{U as default};
