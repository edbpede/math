import{d as q,c as d,o as G,b as P,j as J,g as u,t as m,i as n,S as D,e as Q,s as W,h as X,r as E,m as Z}from"./store.D7pQqe3Y.js";import{m as ee,$ as te}from"./store.BH8NtN2R.js";var le=m('<div class="fixed bottom-0 left-0 right-0 z-50 bg-white border-t-2 border-blue-500 shadow-lg md:bottom-4 md:left-4 md:right-auto md:max-w-md md:rounded-lg md:border-2"role=dialog aria-labelledby=install-prompt-title aria-describedby=install-prompt-description><div class=p-4><div class="flex items-start gap-3 mb-3"><div class="flex-shrink-0 w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center"><svg class="w-8 h-8 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg></div><div class="flex-1 min-w-0"><h3 id=install-prompt-title class="text-lg font-semibold text-gray-900 mb-1"></h3><p id=install-prompt-description class="text-sm text-gray-600"></p></div><button type=button class="flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><svg class="w-5 h-5"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><ul class="space-y-2 mb-4 text-sm text-gray-600"><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg><span></span></li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg><span></span></li><li class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg><span></span></li></ul><div class="flex gap-2"><button type=button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"></button><button type=button class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">'),se=m('<div class="fixed inset-0 bg-black bg-opacity-25 z-40 md:hidden"aria-hidden=true>'),ne=m('<span class="flex items-center justify-center gap-2"><svg class="animate-spin h-4 w-4"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span>');const M="math-install-prompt-dismissed",ie=30;function ae(){const t=ee(te),[L,c]=d(null),[z,i]=d(!1),[A,g]=d(!1),[h,w]=d(!1),B=()=>{if(typeof window>"u"||typeof localStorage>"u")return!1;try{const e=localStorage.getItem(M);if(!e)return!1;const l=parseInt(e,10);return(Date.now()-l)/(1e3*60*60*24)<ie}catch{return!1}},j=()=>{if(typeof window>"u")return;const e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;g(e)},v=e=>{e.preventDefault(),c(e),B()||i(!0),console.log("[InstallPrompt] Install prompt available")},b=()=>{console.log("[InstallPrompt] App installed successfully"),g(!0),i(!1),c(null)},U=async()=>{const e=L();if(e){w(!0);try{await e.prompt();const{outcome:l}=await e.userChoice;console.log(`[InstallPrompt] User response: ${l}`),console.log(l==="accepted"?"[InstallPrompt] User accepted the install prompt":"[InstallPrompt] User dismissed the install prompt"),c(null),i(!1)}catch(l){console.error("[InstallPrompt] Install failed:",l)}finally{w(!1)}}},p=()=>{if(typeof window<"u"&&typeof localStorage<"u")try{localStorage.setItem(M,Date.now().toString())}catch(e){console.error("[InstallPrompt] Failed to save dismissal:",e)}i(!1),console.log("[InstallPrompt] User dismissed install prompt")};return G(()=>{typeof window>"u"||(j(),window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",b),console.log("[InstallPrompt] Component mounted"))}),J(()=>{typeof window<"u"&&(window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",b))}),P(D,{get when(){return Z(()=>!!z())()&&!A()},get children(){return[(()=>{var e=u(le),l=e.firstChild,f=l.firstChild,x=f.firstChild,y=x.nextSibling,$=y.firstChild,H=$.nextSibling,S=y.nextSibling,I=f.nextSibling,_=I.firstChild,N=_.firstChild,T=N.nextSibling,k=_.nextSibling,R=k.firstChild,Y=R.nextSibling,F=k.nextSibling,K=F.firstChild,O=K.nextSibling,V=I.nextSibling,o=V.firstChild,C=o.nextSibling;return n($,()=>t()("pwa.install.title")),n(H,()=>t()("pwa.install.description")),S.$$click=p,n(T,()=>t()("pwa.install.feature.offline")),n(Y,()=>t()("pwa.install.feature.faster")),n(O,()=>t()("pwa.install.feature.homescreen")),o.$$click=U,n(o,P(D,{get when(){return!h()},get fallback(){return(()=>{var s=u(ne),r=s.firstChild,a=r.nextSibling;return n(a,()=>t()("common.status.loading")),s})()},get children(){return t()("pwa.install.button")}})),C.$$click=p,n(C,()=>t()("pwa.install.dismiss")),Q(s=>{var r=t()("common.actions.close"),a=h();return r!==s.e&&W(S,"aria-label",s.e=r),a!==s.t&&X(o,"disabled",s.t=a),s},{e:void 0,t:void 0}),E(),e})(),(()=>{var e=u(se);return e.$$click=p,E(),e})()]}})}q(["click"]);export{ae as default};
