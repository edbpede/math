import{c as h,k as T}from"./store.C-Iyz76Y.js";const g=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])',"audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(", ");function A(o,p={}){const[c,f]=h(!1);let i=null;const{initialFocus:l,returnFocus:u,onActivate:E,onDeactivate:y,allowEscape:b=!1,preventScroll:d=!1}=p,r=()=>{const e=typeof o=="function"?o():void 0;if(!e)return[];const t=e.querySelectorAll(g);return Array.from(t).filter(n=>n.offsetParent!==null||n===document.activeElement)},m=e=>{if(c())if(e.key==="Tab"){const t=r();if(t.length===0){e.preventDefault();return}const n=t[0],s=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),s?.focus()):document.activeElement===s&&(e.preventDefault(),n?.focus())}else e.key==="Escape"&&b&&(e.preventDefault(),a())},v=e=>{if(!c())return;const t=typeof o=="function"?o():void 0;if(!t)return;const n=e.target;if(!t.contains(n)){e.preventDefault();const s=r();s.length>0&&s[0].focus()}},F=()=>{if(c()||typeof document>"u")return;if(!(typeof o=="function"?o():void 0)){console.warn("[FocusTrap] Cannot activate: container not found");return}i=document.activeElement,d&&(document.body.style.overflow="hidden"),f(!0),document.addEventListener("keydown",m),document.addEventListener("focusin",v),setTimeout(()=>{let t;l&&(t=typeof l=="function"?l():l),t||(t=r()[0]),t?.focus()},10),E?.()},a=()=>{c()&&(typeof document>"u"||(f(!1),document.removeEventListener("keydown",m),document.removeEventListener("focusin",v),d&&(document.body.style.overflow=""),setTimeout(()=>{let e;u&&(e=typeof u=="function"?u():u),!e&&i&&(e=i),e?.focus(),i=null},10),y?.()))};return T(()=>{c()&&a()}),{activate:F,deactivate:a,isActive:c}}export{A as c};
