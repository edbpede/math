import{d as e,m as t,b as n,C as i,g as o,h as a,i as s,f as r,l,t as d,w as m,o as c,j as u,k as g,A as f,n as v,r as w}from"./solid-core.DXeZPQOr.js";import{$ as h}from"./exercises.DgCluh1K.js";var p=d('<span class="absolute inset-0 w-2 h-2 rounded-full bg-blue-600 animate-ping opacity-75"aria-hidden=true>'),y=d('<span class="text-sm text-gray-600 hidden sm:inline"><!$><!/> <!$><!/>'),b=d('<button type=button class="btn-ghost text-xs touch-target"><svg fill=none viewBox="0 0 24 24"stroke=currentColor aria-hidden=true><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">'),x=d('<div role=status aria-live=polite aria-atomic=true><div class="flex items-center gap-2"><div class=relative><span aria-hidden=true></span><!$><!/></div><span></span></div><!$><!/><!$><!/>');function S(e){const d=t(h),[S,$]=n(!0),[L,k]=n(!1),[E,C]=n(null),[j,D]=n(""),I=()=>{"undefined"!=typeof navigator&&$(navigator.onLine)},M=()=>{const e=E();e&&D((e=>{const t=(new Date).getTime()-e.getTime(),n=Math.floor(t/1e3),i=Math.floor(n/60),o=Math.floor(i/60),a=Math.floor(o/24),s=d();return n<60?s("common.time.justNow"):i<60?`${i} ${s("common.time.minutes")} ${s("common.time.ago")}`:o<24?`${o} ${s("common.time.hours")} ${s("common.time.ago")}`:`${a} ${s("common.time.days")} ${s("common.time.ago")}`})(e))},T=async()=>{if(!L()&&S()){k(!0);try{await new Promise(e=>setTimeout(e,1e3)),C(new Date)}catch(e){}finally{k(!1)}}};i(()=>{if("undefined"==typeof window)return;if(I(),window.addEventListener("online",I),window.addEventListener("offline",I),"undefined"!=typeof localStorage){const e=localStorage.getItem("lastSyncTimestamp");e&&C(new Date(e))}const e=setInterval(M,3e4);M();const t=()=>k(!0),n=e=>{k(!1);const t=new Date(e.detail.timestamp||Date.now());C(t),"undefined"!=typeof localStorage&&localStorage.setItem("lastSyncTimestamp",t.toISOString())};window.addEventListener("sync:start",t),window.addEventListener("sync:complete",n),c(()=>{"undefined"!=typeof window&&(window.removeEventListener("online",I),window.removeEventListener("offline",I),window.removeEventListener("sync:start",t),window.removeEventListener("sync:complete",n)),clearInterval(e)})});const A=()=>L()?d()("common.status.syncing"):S()?d()("common.status.online"):d()("common.status.offline");return(()=>{var t=o(x),n=t.firstChild,i=n.firstChild,c=i.firstChild,h=c.nextSibling,[$,k]=a(h.nextSibling),C=i.nextSibling,D=n.nextSibling,[I,M]=a(D.nextSibling),B=I.nextSibling,[H,N]=a(B.nextSibling);return s(i,r(u,{get when(){return L()},get children(){return o(p)}}),$,k),s(C,A),s(t,r(u,{get when(){return g(()=>!!E())()&&!L()},get children(){var e=o(y),t=e.firstChild,[n,i]=a(t.nextSibling),r=n.nextSibling.nextSibling,[l,m]=a(r.nextSibling);return s(e,()=>d()("common.status.synced"),n,i),s(e,j,l,m),e}}),I,M),s(t,r(u,{get when(){return g(()=>!!e.showSyncButton)()&&S()},get children(){var e=o(b),t=e.firstChild;return e.$$click=T,l(n=>{var i=L(),o=d()("common.status.syncing"),a=d()("common.status.syncing"),s="w-4 h-4 "+(L()?"animate-spin":"");return i!==n.e&&f(e,"disabled",n.e=i),o!==n.t&&v(e,"aria-label",n.t=o),a!==n.a&&v(e,"title",n.a=a),s!==n.o&&v(t,"class",n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),w(),e}}),H,N),l(n=>{var i=`sync-status flex items-center gap-3 ${e.class||""}`,o="inline-block w-2 h-2 rounded-full "+(L()?"bg-blue-600":S()?"bg-green-600":"bg-gray-400"),a="text-sm font-medium "+(L()?"text-blue-600":S()?"text-green-600":"text-gray-500");return i!==n.e&&m(t,n.e=i),o!==n.t&&m(c,n.t=o),a!==n.a&&m(C,n.a=a),n},{e:void 0,t:void 0,a:void 0}),t})()}e(["click"]);export{S as default};
