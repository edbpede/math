import{d as ge,c as j,g as a,a as s,i,b as c,e as he,r as ue,t as v,f as x,s as o,h as I,S as g,m as P}from"./store.D7pQqe3Y.js";import{m as R,$ as de,a as ve,e as me}from"./store.CLE7GteW.js";import{g as be,u as fe}from"./service.DU7FcLOF.js";import"./client.D0X2hLWc.js";import"./_commonjsHelpers.gnU0ypJ3.js";var V=v("<span class=font-medium>"),q=v('<span class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"aria-hidden=true>'),we=v('<div class="flex items-center text-sm text-gray-600"role=status aria-live=polite><svg class="w-4 h-4 mr-2 animate-spin"fill=none viewBox="0 0 24 24"aria-hidden=true><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span>'),xe=v('<div class="text-sm text-red-600 px-2"role=alert aria-live=assertive>'),$e=v('<div role=group><button type=button><svg class="w-6 h-6 flex-shrink-0"viewBox="0 0 37 28"fill=none xmlns=http://www.w3.org/2000/svg aria-hidden=true><rect width=37 height=28 fill=#C8102E></rect><rect x=12 width=4 height=28 fill=white></rect><rect y=12 width=37 height=4 fill=white></rect></svg><!$><!/><!$><!/></button><button type=button><svg class="w-6 h-6 flex-shrink-0"viewBox="0 0 37 28"fill=none xmlns=http://www.w3.org/2000/svg aria-hidden=true><rect width=37 height=28 fill=#B22234></rect><rect y=4 width=37 height=2 fill=white></rect><rect y=8 width=37 height=2 fill=white></rect><rect y=12 width=37 height=2 fill=white></rect><rect y=16 width=37 height=2 fill=white></rect><rect y=20 width=37 height=2 fill=white></rect><rect y=24 width=37 height=2 fill=white></rect><rect width=15 height=12 fill=#3C3B6E></rect></svg><!$><!/><!$><!/></button><!$><!/><!$><!/>');function Ee(f){const n=R(de),$=R(ve),[w,y]=j(!1),[S,_]=j(null),h=()=>f.variant||"full",G=()=>f.layout||"horizontal",p=async r=>{if($()!==r){y(!0),_(null);try{await me(r);try{const t=await be();if(t){const d=await fe(t.id,{locale:r});d.success||console.warn("Failed to persist language preference to Supabase:",d.error)}}catch(t){console.warn("Error persisting language preference:",t)}}catch(t){console.error("Error changing language:",t),_("Failed to change language")}finally{y(!1)}}},u=r=>$()===r,J=()=>{const r="flex items-center gap-2 p-3 rounded-lg transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 min-w-44px min-h-44px disabled:opacity-50 disabled:cursor-not-allowed";return h()==="compact"?`${r} justify-center`:r},C=r=>{const t=J();return u(r)?`${t} bg-blue-600 text-white shadow-md hover:bg-blue-700 active:bg-blue-800`:`${t} bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-400 hover:bg-blue-50 active:bg-blue-100`},O=()=>{const r="language-selector",t=G()==="horizontal"?"flex flex-row gap-2":"flex flex-col gap-2";return`${r} ${t} ${f.class||""}`};return(()=>{var r=a($e),t=r.firstChild,d=t.firstChild,Q=d.nextSibling,[E,T]=s(Q.nextSibling),W=E.nextSibling,[X,Y]=s(W.nextSibling),l=t.nextSibling,Z=l.firstChild,ee=Z.nextSibling,[k,te]=s(ee.nextSibling),re=k.nextSibling,[le,ie]=s(re.nextSibling),ne=l.nextSibling,[B,ae]=s(ne.nextSibling),oe=B.nextSibling,[se,ce]=s(oe.nextSibling);return t.$$click=()=>p("da-DK"),i(t,c(g,{get when(){return h()==="full"},get children(){var e=a(V);return i(e,()=>n()("common.language.selector.danish")),e}}),E,T),i(t,c(g,{get when(){return P(()=>h()==="compact")()&&u("da-DK")},get children(){return a(q)}}),X,Y),l.$$click=()=>p("en-US"),i(l,c(g,{get when(){return h()==="full"},get children(){var e=a(V);return i(e,()=>n()("common.language.selector.english")),e}}),k,te),i(l,c(g,{get when(){return P(()=>h()==="compact")()&&u("en-US")},get children(){return a(q)}}),le,ie),i(r,c(g,{get when(){return w()},get children(){var e=a(we),m=e.firstChild,b=m.nextSibling;return i(b,()=>n()("common.language.selector.changingLanguage")),e}}),B,ae),i(r,c(g,{get when(){return S()},get children(){var e=a(xe);return i(e,S),e}}),se,ce),he(e=>{var m=O(),b=n()("common.language.selector.title"),U=w(),z=C("da-DK"),D=n()("common.language.selector.danish"),K=u("da-DK"),A=n()("common.language.selector.danish"),N=w(),F=C("en-US"),H=n()("common.language.selector.english"),L=u("en-US"),M=n()("common.language.selector.english");return m!==e.e&&x(r,e.e=m),b!==e.t&&o(r,"aria-label",e.t=b),U!==e.a&&I(t,"disabled",e.a=U),z!==e.o&&x(t,e.o=z),D!==e.i&&o(t,"aria-label",e.i=D),K!==e.n&&o(t,"aria-pressed",e.n=K),A!==e.s&&o(t,"title",e.s=A),N!==e.h&&I(l,"disabled",e.h=N),F!==e.r&&x(l,e.r=F),H!==e.d&&o(l,"aria-label",e.d=H),L!==e.l&&o(l,"aria-pressed",e.l=L),M!==e.u&&o(l,"title",e.u=M),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),ue(),r})()}ge(["click"]);export{Ee as default};
