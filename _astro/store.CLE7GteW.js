import{n as V,l as x,j as k}from"./store.D7pQqe3Y.js";function G(e,n={}){let t=e.listen(()=>{}),[r,s]=V({value:e.get()}),o=e.subscribe(i=>{s("value",x(i,n))});return k(()=>o()),t(),()=>r.value}const N="modulepreload",M=function(e){return"/"+e},P={},u=function(n,t,r){let s=Promise.resolve();if(t&&t.length>0){let i=function(l){return Promise.all(l.map(a=>Promise.resolve(a).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");s=i(t.map(l=>{if(l=M(l),l in P)return;P[l]=!0;const a=l.endsWith(".css"),_=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${_}`))return;const p=document.createElement("link");if(p.rel=a?"stylesheet":N,a||(p.as="script"),p.crossOrigin="",p.href=l,d&&p.setAttribute("nonce",d),document.head.appendChild(p),a)return new Promise((I,U)=>{p.addEventListener("load",I),p.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return s.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return n().catch(o)})},v=(e,n,t)=>{const r=e[n];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((s,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+n+(n.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},T=new Map;async function A(e){if(T.has(e))return T.get(e);try{const[n,t,r,s,o,i,c,d,l]=await Promise.all([v(Object.assign({"../../locales/da-DK/common.json":()=>u(()=>import("./common.cBz8hZqT.js"),[]),"../../locales/en-US/common.json":()=>u(()=>import("./common.DdIz3n71.js"),[])}),`../../locales/${e}/common.json`,5),v(Object.assign({"../../locales/da-DK/auth.json":()=>u(()=>import("./auth.HVp6IZyE.js"),[]),"../../locales/en-US/auth.json":()=>u(()=>import("./auth.Bs-kKy4E.js"),[])}),`../../locales/${e}/auth.json`,5),v(Object.assign({"../../locales/da-DK/navigation.json":()=>u(()=>import("./navigation.Btn6WB7J.js"),[]),"../../locales/en-US/navigation.json":()=>u(()=>import("./navigation.B2nT99uy.js"),[])}),`../../locales/${e}/navigation.json`,5),v(Object.assign({"../../locales/da-DK/competencies.json":()=>u(()=>import("./competencies.DdIfjZOw.js"),[]),"../../locales/en-US/competencies.json":()=>u(()=>import("./competencies.D0vbV592.js"),[])}),`../../locales/${e}/competencies.json`,5),v(Object.assign({"../../locales/da-DK/exercises.json":()=>u(()=>import("./exercises.-HbE34H0.js"),[]),"../../locales/en-US/exercises.json":()=>u(()=>import("./exercises.BZJtwYKu.js"),[])}),`../../locales/${e}/exercises.json`,5),v(Object.assign({"../../locales/da-DK/feedback.json":()=>u(()=>import("./feedback.DnPELs-0.js"),[]),"../../locales/en-US/feedback.json":()=>u(()=>import("./feedback.B3J2n9gt.js"),[])}),`../../locales/${e}/feedback.json`,5),v(Object.assign({"../../locales/da-DK/hints.json":()=>u(()=>import("./hints.BlcneRBO.js"),[]),"../../locales/en-US/hints.json":()=>u(()=>import("./hints.CqJ8wUWo.js"),[])}),`../../locales/${e}/hints.json`,5),v(Object.assign({"../../locales/da-DK/contexts.json":()=>u(()=>import("./contexts.BWTsIbiN.js"),[]),"../../locales/en-US/contexts.json":()=>u(()=>import("./contexts.OqJEuN6e.js"),[])}),`../../locales/${e}/contexts.json`,5),v(Object.assign({"../../locales/da-DK/errors.json":()=>u(()=>import("./errors.DeIckTYf.js"),[]),"../../locales/en-US/errors.json":()=>u(()=>import("./errors.CYNC8t1X.js"),[])}),`../../locales/${e}/errors.json`,5)]),a={common:n.default||n,auth:t.default||t,navigation:r.default||r,competencies:s.default||s,exercises:o.default||o,feedback:i.default||i,hints:c.default||c,contexts:d.default||d,errors:l.default||l};return T.set(e,a),a}catch(n){if(console.error(`Failed to load translations for locale ${e}:`,n),e!=="da-DK")return console.warn("Falling back to Danish (da-DK) translations"),A("da-DK");throw new Error(`Failed to load Danish fallback translations: ${n}`)}}function K(e,n){const t=n.split(".");let r=e;for(const s of t)if(r&&typeof r=="object"&&s in r)r=r[s];else return;return r}function $(e,n){return n?e.replace(/\{\{(\w+)\}\}/g,(t,r)=>r in n?String(n[r]):t):e}function q(){if(typeof window>"u")return"da-DK";const e=navigator.language||navigator.userLanguage;return e==="da-DK"||e==="en-US"?e:e.startsWith("da")?"da-DK":e.startsWith("en")?"en-US":"da-DK"}let f=[],E=0;const g=4;let L=0,O=e=>{let n=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(r){return t.lc=n.push(r),()=>{for(let o=E+g;o<f.length;)f[o]===r?f.splice(o,g):o+=g;let s=n.indexOf(r);~s&&(n.splice(s,1),--t.lc||t.off())}},notify(r,s){L++;let o=!f.length;for(let i of n)f.push(i,t.value,r,s);if(o){for(E=0;E<f.length;E+=g)f[E](f[E+1],f[E+2],f[E+3]);f.length=0}},off(){},set(r){let s=t.value;s!==r&&(t.value=r,t.notify(s))},subscribe(r){let s=t.listen(r);return r(t.value),s},value:e};return t};const C=5,h=6,D=10;let F=(e,n,t,r)=>(e.events=e.events||{},e.events[t+D]||(e.events[t+D]=r(s=>{e.events[t].reduceRight((o,i)=>(i(o),o),{shared:{},...s})})),e.events[t]=e.events[t]||[],e.events[t].push(n),()=>{let s=e.events[t],o=s.indexOf(n);s.splice(o,1),s.length||(delete e.events[t],e.events[t+D](),delete e.events[t+D])}),Q=1e3,y=(e,n)=>F(e,r=>{let s=n(r);s&&e.events[h].push(s)},C,r=>{let s=e.listen;e.listen=(...i)=>(!e.lc&&!e.active&&(e.active=!0,r()),s(...i));let o=e.off;return e.events[h]=[],e.off=()=>{o(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let i of e.events[h])i();e.events[h]=[]}},Q)},()=>{e.listen=s,e.off=o}}),W=(e,n,t)=>{Array.isArray(e)||(e=[e]);let r,s,o=()=>{if(s===L)return;s=L;let l=e.map(a=>a.get());if(!r||l.some((a,_)=>a!==r[_])){r=l;let a=n(...l);a&&a.then&&a.t?a.then(_=>{r===l&&i.set(_)}):(i.set(a),s=L)}},i=O(void 0),c=i.get;i.get=()=>(o(),c());let d=o;return y(i,()=>{let l=e.map(a=>a.listen(d));return o(),()=>{for(let a of l)a()}}),i},B=(e,n)=>W(e,n),S=e=>e,m={},w={addEventListener(){},removeEventListener(){}};function J(){try{return typeof localStorage<"u"}catch{return!1}}J()&&(m=localStorage);let H={addEventListener(e,n,t){window.addEventListener("storage",n),window.addEventListener("pageshow",t)},removeEventListener(e,n,t){window.removeEventListener("storage",n),window.removeEventListener("pageshow",t)}};typeof window<"u"&&(w=H);function Y(e,n=void 0,t={}){let r=t.encode||S,s=t.decode||S,o=O(n),i=o.set;o.set=l=>{let a=r(l);typeof a>"u"?delete m[e]:m[e]=a,i(l)};function c(l){l.key===e?l.newValue===null?i(n):i(s(l.newValue)):m[e]||i(n)}function d(){o.set(m[e]?s(m[e]):n)}return y(o,()=>{if(d(),t.listen!==!1)return w.addEventListener(e,c,d),()=>{w.removeEventListener(e,c,d)}}),o}const j=Y("app:locale",q(),{encode:JSON.stringify,decode:JSON.parse}),b=O(null),R=O(!1);async function X(e){if(j.get()!==e){R.set(!0);try{const n=await A(e);j.set(e),b.set(n)}catch(n){console.error(`Failed to change locale to ${e}:`,n)}finally{R.set(!1)}}}const Z=B([b,j],(e,n)=>(t,r)=>{if(!e)return t;const s=t.split("."),o=s[0],i=s.slice(1).join(".");if(!(o in e))return t;const c=K(e[o],i);return typeof c!="string"?t:$(c,r)});export{Z as $,v as _,j as a,O as b,B as c,u as d,X as e,G as m};
