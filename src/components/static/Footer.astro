---
/**
 * Footer Component
 * 
 * Site footer with copyright notice, links, and sync status indicator.
 * Displays sync status per Requirement 15.4 for offline-capable PWA.
 * 
 * Requirements:
 * - 15.4: Display online/offline status and last sync timestamp
 * - 9.4: Semantic HTML with ARIA landmarks
 */

import { $t, getCurrentLocale } from '@/lib/i18n'
import SyncStatus from '@/components/islands/SyncStatus'

const locale = await getCurrentLocale()
const translations = await $t.get()

// Get current year for copyright
const currentYear = new Date().getFullYear()

// Footer links
const footerLinks = [
  { label: translations('navigation.footer.links.privacy'), href: '/privacy' },
  { label: translations('navigation.footer.links.help'), href: '/help' },
  { label: translations('navigation.footer.links.about'), href: '/about' },
]

// Interpolate year into copyright text
const copyrightText = translations('navigation.footer.copyright').replace('{{year}}', currentYear.toString())
---

<footer
  class="footer bg-gray-50 border-t border-gray-200 mt-auto safe-bottom"
  role="contentinfo"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      {/* Copyright and links */}
      <div class="flex flex-col sm:flex-row items-center gap-4 text-sm text-gray-600">
        <span>{copyrightText}</span>
        
        <nav aria-label="Footer navigation" class="flex items-center gap-4">
          {footerLinks.map((link, index) => (
            <>
              {index > 0 && (
                <span class="text-gray-400" aria-hidden="true">Â·</span>
              )}
              <a
                href={link.href}
                class="hover:text-blue-600 transition-colors focus-visible-ring rounded px-2 py-1"
              >
                {link.label}
              </a>
            </>
          ))}
        </nav>
      </div>

      {/* Sync status indicator */}
      <div class="flex items-center">
        <SyncStatus client:idle showSyncButton={false} />
      </div>
    </div>

    {/* Additional footer info for small screens */}
    <div class="mt-4 pt-4 border-t border-gray-200 md:hidden">
      <p class="text-xs text-gray-500 text-center">
        {translations('common.app.tagline')}
      </p>
    </div>
  </div>
</footer>

<style>
  .footer {
    /* Ensure footer stays at bottom of viewport on short pages */
    margin-top: auto;
  }
</style>

